<!DOCTYPE html>
<html lang="ru" data-theme="cyberpunk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ñ–∞–Ω AI</title>
    <meta name="description" content="–£–º–Ω—ã–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ —Å–∞–π—Ç–æ–≤ –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏">
    
    <!-- PWA –º–µ—Ç–∞-—Ç–µ–≥–∏ -->
    <meta name="theme-color" content="#0a0a0f">
    <link rel="icon" type="image/png" href="https://img.icons8.com/color/96/000000/artificial-intelligence.png">
    
    <!-- –®—Ä–∏—Ñ—Ç—ã -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;500;700;800&family=Orbitron:wght@400;500;700;900&family=Rajdhani:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- –ò–∫–æ–Ω–∫–∏ -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        /* –û–°–ù–û–í–ù–´–ï –°–¢–ò–õ–ò */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: linear-gradient(135deg, #0a0a0f 0%, #0f1525 50%, #1a1a2e 100%);
            color: #e0e0ff;
            font-family: 'Rajdhani', 'Segoe UI', sans-serif;
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 30%, rgba(0, 100, 255, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(255, 0, 200, 0.05) 0%, transparent 50%);
            z-index: -1;
        }

        /* –ì–õ–ê–í–ù–´–ô –ö–û–ù–¢–ï–ô–ù–ï–† */
        .main-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* –•–ï–î–ï–† */
        .cyber-header {
            background: rgba(10, 15, 30, 0.85);
            border: 1px solid rgba(0, 255, 234, 0.3);
            border-radius: 15px;
            padding: 15px 25px;
            margin-bottom: 25px;
            position: relative;
            overflow: hidden;
            backdrop-filter: blur(10px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }

        .header-grid {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .logo-icon {
            font-size: 2.5rem;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .logo-text {
            font-family: 'Orbitron', sans-serif;
            font-size: 2.2rem;
            font-weight: 900;
            background: linear-gradient(90deg, #00ffea, #0080ff);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            letter-spacing: 2px;
            text-transform: uppercase;
        }

        .logo-accent {
            color: #ff00ff;
            text-shadow: 0 0 10px rgba(255, 0, 255, 0.5);
        }

        .logo-subtitle {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9rem;
            color: #00ffea;
            letter-spacing: 1px;
            background: rgba(0, 255, 234, 0.1);
            padding: 3px 10px;
            border-radius: 12px;
            border: 1px solid rgba(0, 255, 234, 0.3);
        }

        .system-status {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
        }

        .status-item {
            display: flex;
            align-items: center;
            gap: 8px;
            background: rgba(0, 20, 40, 0.7);
            padding: 8px 15px;
            border-radius: 20px;
            border: 1px solid rgba(0, 150, 255, 0.3);
        }

        .status-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: #ff5555;
            animation: blink 1.5s infinite;
        }

        .status-dot.active {
            background: #00ff55;
            box-shadow: 0 0 10px #00ff55;
        }

        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .status-icon {
            font-size: 0.9rem;
        }

        .status-text {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
            color: #a0a0ff;
        }

        .status-value {
            color: #00ffea;
            font-weight: 600;
        }

        .scan-line {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 2px;
            background: linear-gradient(90deg, transparent, #00ffea, transparent);
            animation: scan 3s linear infinite;
        }

        @keyframes scan {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        /* –û–°–ù–û–í–ù–û–ô –ö–û–ù–¢–ï–ù–¢ */
        .content-grid {
            display: flex;
            gap: 25px;
            flex: 1;
            margin-bottom: 25px;
        }

        /* –õ–ï–í–ê–Ø –ü–ê–ù–ï–õ–¨ –ò–ù–°–¢–†–£–ú–ï–ù–¢–û–í */
        .tools-panel {
            width: 280px;
            flex-shrink: 0;
            background: rgba(15, 20, 40, 0.85);
            border-radius: 15px;
            border: 1px solid rgba(0, 255, 234, 0.2);
            padding: 20px;
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.4);
            display: flex;
            flex-direction: column;
        }

        .panel-header {
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid rgba(0, 255, 234, 0.3);
        }

        .panel-header h3 {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.3rem;
            color: #00ffea;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .tools-grid {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-bottom: 20px;
        }

        .tool-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px;
            background: rgba(30, 40, 70, 0.6);
            border-radius: 10px;
            border: 1px solid rgba(0, 150, 255, 0.2);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .tool-item:hover {
            background: rgba(40, 60, 120, 0.8);
            transform: translateX(5px);
            border-color: #00ffea;
        }

        .tool-item.active {
            background: rgba(0, 100, 200, 0.7);
            border-color: #00ffea;
            box-shadow: 0 0 15px rgba(0, 255, 234, 0.3);
        }

        .tool-icon {
            font-size: 1.8rem;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
        }

        .tool-info {
            flex: 1;
        }

        .tool-name {
            font-family: 'Orbitron', sans-serif;
            font-weight: 600;
            color: #ffffff;
            margin-bottom: 5px;
            font-size: 1.1rem;
        }

        .tool-desc {
            font-size: 0.9rem;
            color: #a0a0ff;
        }

        /* –°–ü–ï–¶–ò–ê–õ–¨–ù–´–ï –ö–û–ù–¢–ï–ô–ù–ï–†–´ –î–õ–Ø –ò–ù–°–¢–†–£–ú–ï–ù–¢–û–í */
        .url-input-container, .image-prompt-container {
            margin-top: 20px;
            padding: 15px;
            background: rgba(0, 30, 60, 0.5);
            border-radius: 10px;
            border: 1px solid rgba(0, 200, 255, 0.3);
            display: none;
        }

        .url-input, .image-prompt {
            width: 100%;
            padding: 12px;
            background: rgba(0, 0, 0, 0.5);
            border: 1px solid #00aaff;
            color: #00ffea;
            font-family: 'JetBrains Mono', monospace;
            border-radius: 5px;
            margin-bottom: 10px;
            font-size: 0.9rem;
        }

        .image-prompt {
            min-height: 100px;
            resize: vertical;
        }

        .url-input:focus, .image-prompt:focus {
            outline: none;
            border-color: #00ffea;
            box-shadow: 0 0 10px rgba(0, 255, 234, 0.5);
        }

        /* –ö–ù–û–ü–ö–ò */
        .cyber-btn {
            background: linear-gradient(90deg, #0066ff, #00aaff);
            border: none;
            color: white;
            padding: 12px 20px;
            font-family: 'Orbitron', sans-serif;
            font-weight: 600;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-size: 0.9rem;
        }

        .cyber-btn:hover {
            background: linear-gradient(90deg, #00aaff, #00ffea);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 170, 255, 0.4);
        }

        .cyber-btn.small {
            padding: 8px 15px;
            font-size: 0.8rem;
        }

        .cyber-btn:active {
            transform: translateY(0);
        }

        /* –ü–ê–ù–ï–õ–¨ –ß–ê–¢–ê - –£–í–ï–õ–ò–ß–ï–ù–ê! */
        .chat-panel {
            flex: 1;
            background: rgba(15, 20, 40, 0.85);
            border-radius: 15px;
            border: 1px solid rgba(0, 255, 234, 0.2);
            display: flex;
            flex-direction: column;
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.4);
            min-height: 700px;
            max-height: 80vh;
        }

        .chat-header {
            padding: 20px;
            background: rgba(20, 30, 60, 0.7);
            border-bottom: 1px solid rgba(0, 255, 234, 0.3);
            border-radius: 15px 15px 0 0;
        }

        .chat-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
        }

        .chat-info h3 {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.5rem;
            color: #00ffea;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .chat-stats {
            display: flex;
            gap: 15px;
        }

        .stat-item {
            display: flex;
            align-items: center;
            gap: 5px;
            background: rgba(0, 40, 80, 0.6);
            padding: 5px 10px;
            border-radius: 20px;
            border: 1px solid rgba(0, 150, 255, 0.3);
        }

        /* –û–ë–õ–ê–°–¢–¨ –°–û–û–ë–©–ï–ù–ò–ô –° –ü–†–û–ö–†–£–¢–ö–û–ô */
        .chat-messages {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 20px;
            min-height: 400px;
            max-height: 550px;
        }

        /* –°—Ç–∏–ª–∏ —Å–∫—Ä–æ–ª–ª–±–∞—Ä–∞ */
        .chat-messages::-webkit-scrollbar {
            width: 8px;
        }

        .chat-messages::-webkit-scrollbar-track {
            background: rgba(20, 30, 60, 0.5);
            border-radius: 10px;
        }

        .chat-messages::-webkit-scrollbar-thumb {
            background: linear-gradient(180deg, #0066ff, #00ffea);
            border-radius: 10px;
        }

        .chat-messages::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(180deg, #00aaff, #00ffaa);
        }

        /* –°–û–û–ë–©–ï–ù–ò–Ø */
        .message-bubble {
            padding: 18px;
            border-radius: 12px;
            max-width: 90%;
            animation: messageAppear 0.3s ease-out;
            line-height: 1.5;
        }

        @keyframes messageAppear {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .message-bubble.user {
            background: linear-gradient(135deg, rgba(30, 60, 120, 0.9), rgba(20, 40, 100, 0.9));
            border: 1px solid rgba(100, 150, 255, 0.4);
            align-self: flex-end;
            margin-left: auto;
            border-bottom-right-radius: 5px;
        }

        .message-bubble.assistant {
            background: linear-gradient(135deg, rgba(40, 80, 100, 0.9), rgba(20, 50, 80, 0.9));
            border: 1px solid rgba(0, 200, 255, 0.4);
            align-self: flex-start;
            border-bottom-left-radius: 5px;
        }

        .message-bubble.system {
            background: linear-gradient(135deg, rgba(60, 30, 80, 0.9), rgba(40, 20, 60, 0.9));
            border: 1px solid rgba(200, 100, 255, 0.4);
            align-self: center;
            max-width: 95%;
            text-align: center;
        }

        .message-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 12px;
            padding-bottom: 8px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .message-avatar {
            font-size: 1.5rem;
        }

        .message-author {
            font-family: 'Orbitron', sans-serif;
            font-weight: 600;
            color: #00ffea;
            font-size: 1rem;
        }

        .message-time {
            margin-left: auto;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.8rem;
            color: #a0a0ff;
        }

        .message-content {
            font-size: 1rem;
            color: #e0e0ff;
        }

        .message-content strong {
            color: #ffffff;
        }

        .message-content h4 {
            color: #00ffea;
            margin-bottom: 10px;
            font-size: 1.2rem;
        }

        .welcome-message {
            margin-bottom: 20px;
        }

        .system-info {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px dashed rgba(0, 255, 234, 0.3);
        }

        .info-item {
            background: rgba(0, 30, 60, 0.5);
            padding: 8px 15px;
            border-radius: 20px;
            border: 1px solid rgba(0, 150, 255, 0.3);
            font-size: 0.9rem;
        }

        .info-item span {
            color: #00ffea;
            font-weight: 600;
        }

        .status-online {
            color: #00ff55;
            text-shadow: 0 0 5px #00ff55;
        }

        /* –û–ë–õ–ê–°–¢–¨ –í–í–û–î–ê */
        .chat-input-area {
            padding: 20px;
            border-top: 1px solid rgba(0, 255, 234, 0.3);
            background: rgba(20, 30, 60, 0.7);
            border-radius: 0 0 15px 15px;
        }

        .input-container {
            background: rgba(10, 20, 40, 0.8);
            border-radius: 10px;
            border: 1px solid rgba(0, 200, 255, 0.3);
            overflow: hidden;
        }

        .input-wrapper {
            display: flex;
            flex-direction: column;
        }

        #message-input {
            width: 100%;
            min-height: 60px;
            padding: 15px;
            background: transparent;
            border: none;
            color: #e0e0ff;
            font-family: 'Rajdhani', sans-serif;
            font-size: 1rem;
            resize: vertical;
            outline: none;
            line-height: 1.5;
        }

        #message-input::placeholder {
            color: #8888cc;
        }

        .input-buttons {
            padding: 10px 15px;
            background: rgba(0, 20, 40, 0.8);
            border-top: 1px solid rgba(0, 150, 255, 0.2);
            display: flex;
            justify-content: flex-end;
        }

        .send-btn {
            display: flex;
            align-items: center;
            gap: 10px;
            background: linear-gradient(90deg, #0066ff, #00aaff);
            border: none;
            color: white;
            padding: 12px 25px;
            font-family: 'Orbitron', sans-serif;
            font-weight: 600;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .send-btn:hover {
            background: linear-gradient(90deg, #00aaff, #00ffea);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 170, 255, 0.4);
        }

        .btn-text {
            font-size: 0.9rem;
        }

        /* –§–£–¢–ï–† */
        .status-bar {
            background: rgba(15, 20, 40, 0.85);
            border: 1px solid rgba(0, 255, 234, 0.2);
            border-radius: 12px;
            padding: 12px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
            backdrop-filter: blur(10px);
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.4);
        }

        .status-left, .status-center {
            display: flex;
            align-items: center;
            gap: 15px;
            flex-wrap: wrap;
        }

        .session-info {
            display: flex;
            align-items: center;
            gap: 10px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
            color: #a0a0ff;
        }

        .divider {
            color: #00ffea;
        }

        #session-id, #current-clock {
            color: #00ffea;
            font-weight: 600;
        }

        .connection-status {
            display: flex;
            align-items: center;
            gap: 8px;
            background: rgba(0, 40, 80, 0.6);
            padding: 6px 12px;
            border-radius: 20px;
            border: 1px solid rgba(0, 150, 255, 0.3);
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
        }

        .conn-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #ff5555;
        }

        .conn-dot.active {
            background: #00ff55;
            box-shadow: 0 0 8px #00ff55;
        }

        /* –ü–ê–ù–ï–õ–¨ –ó–ê–ì–†–£–ó–ö–ò CPU */
        .cpu-usage {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: auto;
            padding-top: 15px;
            border-top: 1px solid rgba(0, 255, 234, 0.2);
        }

        .cpu-label {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9rem;
            color: #a0a0ff;
            white-space: nowrap;
        }

        .cpu-bar {
            flex: 1;
            height: 8px;
            background: rgba(0, 30, 60, 0.7);
            border-radius: 4px;
            overflow: hidden;
        }

        .cpu-fill {
            height: 100%;
            background: linear-gradient(90deg, #0066ff, #00ffea);
            border-radius: 4px;
            width: 5%;
            transition: width 1s ease;
        }

        .cpu-value {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9rem;
            color: #00ffea;
            font-weight: 600;
            min-width: 40px;
        }

        /* –ò–ù–î–ò–ö–ê–¢–û–† –ù–ê–ë–û–†–ê */
        .typing-indicator {
            display: flex;
            align-items: center;
            gap: 5px;
            padding: 10px;
            color: #00ffea;
            font-style: italic;
        }

        .typing-dot {
            width: 8px;
            height: 8px;
            background: #00ffea;
            border-radius: 50%;
            opacity: 0.7;
        }

        /* –ê–î–ê–ü–¢–ò–í–ù–û–°–¢–¨ */
        @media (max-width: 1200px) {
            .content-grid {
                flex-direction: column;
            }
            
            .tools-panel {
                width: 100%;
            }
            
            .chat-panel {
                max-height: 70vh;
            }
        }

        @media (max-width: 768px) {
            .header-grid {
                flex-direction: column;
                gap: 15px;
                text-align: center;
            }
            
            .logo {
                justify-content: center;
            }
            
            .system-status {
                justify-content: center;
            }
            
            .status-bar {
                flex-direction: column;
                gap: 10px;
                text-align: center;
            }
            
            .chat-messages {
                max-height: 400px;
            }
        }

        /* –ê–ù–ò–ú–ê–¶–ò–ò */
        .glitch {
            position: relative;
        }

        .glitch::before, .glitch::after {
            content: attr(data-text);
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }

        .glitch::before {
            left: 2px;
            text-shadow: -1px 0 #ff00ff;
            animation: glitch-1 2s infinite linear alternate-reverse;
        }

        .glitch::after {
            left: -2px;
            text-shadow: 1px 0 #00ffea;
            animation: glitch-2 3s infinite linear alternate-reverse;
        }

        @keyframes glitch-1 {
            0% { clip: rect(20px, 9999px, 15px, 0); }
            5% { clip: rect(12px, 9999px, 20px, 0); }
            10% { clip: rect(25px, 9999px, 30px, 0); }
            15% { clip: rect(40px, 9999px, 35px, 0); }
            20% { clip: rect(55px, 9999px, 45px, 0); }
            25% { clip: rect(65px, 9999px, 50px, 0); }
            30% { clip: rect(75px, 9999px, 60px, 0); }
            35% { clip: rect(85px, 9999px, 65px, 0); }
            40% { clip: rect(95px, 9999px, 75px, 0); }
            45% { clip: rect(105px, 9999px, 80px, 0); }
            50% { clip: rect(115px, 9999px, 90px, 0); }
            55% { clip: rect(125px, 9999px, 95px, 0); }
            60% { clip: rect(135px, 9999px, 105px, 0); }
            65% { clip: rect(145px, 9999px, 110px, 0); }
            70% { clip: rect(155px, 9999px, 120px, 0); }
            75% { clip: rect(165px, 9999px, 125px, 0); }
            80% { clip: rect(175px, 9999px, 135px, 0); }
            85% { clip: rect(185px, 9999px, 140px, 0); }
            90% { clip: rect(195px, 9999px, 150px, 0); }
            95% { clip: rect(205px, 9999px, 155px, 0); }
            100% { clip: rect(215px, 9999px, 165px, 0); }
        }

        @keyframes glitch-2 {
            0% { clip: rect(30px, 9999px, 20px, 0); }
            5% { clip: rect(25px, 9999px, 15px, 0); }
            10% { clip: rect(40px, 9999px, 25px, 0); }
            15% { clip: rect(50px, 9999px, 30px, 0); }
            20% { clip: rect(60px, 9999px, 40px, 0); }
            25% { clip: rect(70px, 9999px, 45px, 0); }
            30% { clip: rect(80px, 9999px, 55px, 0); }
            35% { clip: rect(90px, 9999px, 60px, 0); }
            40% { clip: rect(100px, 9999px, 70px, 0); }
            45% { clip: rect(110px, 9999px, 75px, 0); }
            50% { clip: rect(120px, 9999px, 85px, 0); }
            55% { clip: rect(130px, 9999px, 90px, 0); }
            60% { clip: rect(140px, 9999px, 100px, 0); }
            65% { clip: rect(150px, 9999px, 105px, 0); }
            70% { clip: rect(160px, 9999px, 115px, 0); }
            75% { clip: rect(170px, 9999px, 120px, 0); }
            80% { clip: rect(180px, 9999px, 130px, 0); }
            85% { clip: rect(190px, 9999px, 135px, 0); }
            90% { clip: rect(200px, 9999px, 145px, 0); }
            95% { clip: rect(210px, 9999px, 150px, 0); }
            100% { clip: rect(220px, 9999px, 160px, 0); }
        }
        /* === –°–¢–ò–õ–ò –î–õ–Ø –ü–û–ò–°–ö–ê –ò–ù–§–û–†–ú–ê–¶–ò–ò === */
.search-categories {
    margin-top: 20px;
    padding: 15px;
    background: rgba(0, 30, 60, 0.5);
    border-radius: 10px;
    border: 1px solid rgba(0, 200, 255, 0.3);
    display: none;
}

.categories-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 10px;
    margin-bottom: 15px;
}

.category-btn {
    background: rgba(30, 60, 120, 0.7);
    border: 1px solid rgba(100, 150, 255, 0.4);
    color: #a0c0ff;
    padding: 10px;
    border-radius: 8px;
    cursor: pointer;
    text-align: center;
    font-size: 0.85rem;
    transition: all 0.3s;
    font-family: 'Rajdhani', sans-serif;
    font-weight: 500;
}

.category-btn:hover {
    background: rgba(50, 100, 200, 0.9);
    border-color: #00aaff;
    transform: translateY(-2px);
}

.category-btn.active {
    background: rgba(0, 100, 200, 0.9);
    border-color: #00ffea;
    color: #ffffff;
    box-shadow: 0 0 10px rgba(0, 255, 234, 0.3);
}

.category-icon {
    font-size: 1.2rem;
    margin-bottom: 5px;
    display: block;
}

.search-input-container {
    display: flex;
    gap: 10px;
    margin-top: 10px;
}

.search-input {
    flex: 1;
    padding: 12px;
    background: rgba(0, 0, 0, 0.5);
    border: 1px solid #00aaff;
    color: #e0e0ff;
    border-radius: 5px;
    font-family: 'Rajdhani', sans-serif;
    font-size: 1rem;
}

.search-btn {
    background: linear-gradient(90deg, #0066ff, #00aaff);
    border: none;
    color: white;
    padding: 0 20px;
    border-radius: 5px;
    cursor: pointer;
    font-family: 'Orbitron', sans-serif;
    font-weight: 600;
    font-size: 0.9rem;
    text-transform: uppercase;
    letter-spacing: 1px;
    min-width: 100px;
}

.search-btn:hover {
    background: linear-gradient(90deg, #00aaff, #00ffea);
}

.search-suggestions {
    margin-top: 10px;
    font-size: 0.85rem;
    color: #8888cc;
    text-align: center;
}
    </style>
</head>
<body>
    <!-- –ì–ª–∞–≤–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä -->
    <div class="main-container">
        <!-- –•–µ–¥–µ—Ä -->
        <header class="cyber-header">
            <div class="header-grid">
                <div class="logo">
                    <span class="logo-icon">üß†</span>
                    <h1 class="logo-text">–ñ–∞–Ω<span class="logo-accent">---AI</span></h1>
                    <div class="logo-subtitle">AI –ê–°–°–ò–°–¢–ï–ù–¢ v2.0</div>
                </div>
                
                <div class="system-status">
                    <div class="status-item">
                        <span class="status-dot active"></span>
                        <span class="status-text">–°–¢–ê–¢–£–°: <span class="status-value" id="system-status">–û–ù–õ–ê–ô–ù</span></span>
                    </div>
                    <div class="status-item">
                        <span class="status-icon">üîê</span>
                        <span class="status-text">API: <span class="status-value" id="api-status">GOOGLE AI</span></span>
                    </div>
                </div>
            </div>
            
            <div class="scan-line"></div>
        </header>

        <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
        <main class="content-grid">
            <!-- –õ–µ–≤–∞—è –ø–∞–Ω–µ–ª—å: –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã -->
            <aside class="tools-panel">
                <div class="panel-header">
                    <h3><i class="fas fa-tools"></i> –ò–ù–°–¢–†–£–ú–ï–ù–¢–´</h3>
                </div>
                
                <div class="tools-grid" id="tools-container">
                    <!-- –¢—Ä–∏ –æ—Å–Ω–æ–≤–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ -->
                    <div class="tool-item active" data-tool="chat">
                        <div class="tool-icon">üí¨</div>
                        <div class="tool-info">
                            <div class="tool-name">–ß–∞—Ç AI</div>
                            <div class="tool-desc">–û–±—â–µ–Ω–∏–µ —Å –Ω–µ–π—Ä–æ—Å–µ—Ç—å—é</div>
                        </div>
                    </div>
                    
                    <div class="tool-item" data-tool="security">
                        <div class="tool-icon">üîí</div>
                        <div class="tool-info">
                            <div class="tool-name">–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å</div>
                            <div class="tool-desc">–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∞–π—Ç–æ–≤</div>
                        </div>
                    </div>
                    
                    <div class="tool-item" data-tool="search"> <!-- –ò–∑–º–µ–Ω–∏–ª–∏ —Å image –Ω–∞ search -->
    <div class="tool-icon">üîç</div>
    <div class="tool-info">
        <div class="tool-name">–ü–æ–∏—Å–∫ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏</div>
        <div class="tool-desc">–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π –ø–æ–∏—Å–∫ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º</div>
    </div>
</div>

                <!-- –ü–æ–ª–µ –¥–ª—è URL –ø—Ä–∏ –≤—ã–±–æ—Ä–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ -->
                <div class="url-input-container" id="url-input-container">
                    <h4>–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∞–π—Ç–∞</h4>
                    <input type="text" id="url-input" placeholder="https://example.com" class="url-input">
                    <button class="cyber-btn small" id="check-url-btn">–ü–†–û–í–ï–†–ò–¢–¨ –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨</button>
                </div>
                
                                <!-- –ü–†–û–°–¢–û–ô –ö–û–ù–¢–ï–ô–ù–ï–† –ü–û–ò–°–ö–ê -->
                <div class="search-categories" id="search-container" style="display: none;">
                    <h4 style="color: #00ffea; margin-bottom: 10px;">üîç –ü–û–ò–°–ö</h4>
                    <!-- –ö–ê–¢–ï–ì–û–†–ò–ò -->
    <div class="categories-grid" id="categories-grid">
        <div class="category-btn active" data-category="general">
            <span class="category-icon">üîç</span>
            <span>–û–±—â–∏–π –ø–æ–∏—Å–∫</span>
        </div>
        <div class="category-btn" data-category="tech">
            <span class="category-icon">üíª</span>
            <span>–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏</span>
        </div>
        <div class="category-btn" data-category="science">
            <span class="category-icon">üî¨</span>
            <span>–ù–∞—É–∫–∞</span>
        </div>
        <div class="category-btn" data-category="news">
            <span class="category-icon">üì∞</span>
            <span>–ù–æ–≤–æ—Å—Ç–∏</span>
        </div>
    </div>
                    <input type="text" id="search-query" class="search-input" placeholder="–í–≤–µ–¥–∏—Ç–µ –∑–∞–ø—Ä–æ—Å...">
                    <button class="cyber-btn small" id="perform-search" style="margin-top: 10px; width: 100%;">
                        <i class="fas fa-search"></i> –ù–ê–ô–¢–ò
                    </button>
                </div>
                <div class="cpu-usage">
                    <div class="cpu-label">–ó–ê–ì–†–£–ó–ö–ê –°–ò–°–¢–ï–ú–´:</div>
                    <div class="cpu-bar">
                        <div class="cpu-fill" id="cpu-fill"></div>
                    </div>
                    <div class="cpu-value" id="cpu-value">5%</div>
                </div>
            </aside>

            <!-- –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è –ø–∞–Ω–µ–ª—å: –ß–∞—Ç (–≥–ª–∞–≤–Ω–∞—è —á–∞—Å—Ç—å) -->
            <section class="chat-panel">
                <div class="chat-header">
                    <div class="chat-info">
                        <h3><i class="fas fa-comments"></i> <span id="chat-title">–ß–ê–¢ –° –ù–ï–ô–†–û–°–ï–¢–¨–Æ</span></h3>
                        <div class="chat-stats">
                            <span class="stat-item">
                                <i class="fas fa-message"></i>
                                <span id="message-count">0</span>
                            </span>
                            <span class="stat-item">
                                <i class="fas fa-bolt"></i>
                                <span id="ai-status">GOOGLE AI</span>
                            </span>
                        </div>
                    </div>
                    
                    <div class="chat-controls">
                        <button class="cyber-btn small" id="clear-chat" title="–û—á–∏—Å—Ç–∏—Ç—å —á–∞—Ç">
                            <i class="fas fa-trash"></i> –û–ß–ò–°–¢–ò–¢–¨
                        </button>
                    </div>
                </div>
                
                <!-- –û–±–ª–∞—Å—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–π —Å –ø—Ä–æ–∫—Ä—É—Ç–∫–æ–π -->
                <div class="chat-messages" id="chat-messages">
                    <!-- –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ -->
                    <div class="welcome-message">
                        <div class="message-bubble system">
                            <div class="message-header">
                                <span class="message-avatar">ü§ñ</span>
                                <span class="message-author">–¢–≤–æ–π –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –ñ–∞–Ω</span>
                                <span class="message-time" id="current-time"></span>
                            </div>
                            <div class="message-content">
                                <h4>üëã –ü–†–ò–í–ï–¢–°–¢–í–£–Æ –í –ñ–∞–Ω AI</h4>
                                <p>–Ø –≤–∞—à —É–º–Ω—ã–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç —Å —Ç—Ä–µ–º—è –æ—Å–Ω–æ–≤–Ω—ã–º–∏ —Ñ—É–Ω–∫—Ü–∏—è–º–∏:</p>
                                <p>‚ñ∏ <strong>–ß–∞—Ç AI</strong> - –æ–±—â–∞–π—Ç–µ—Å—å –∫–∞–∫ —Å ChatGPT<br>
                                ‚ñ∏ <strong>–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å</strong> - –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ —Å–∞–π—Ç—ã –Ω–∞ —É–≥—Ä–æ–∑—ã<br>
                                ‚ñ∏ <strong>–ì–µ–Ω–µ—Ä–∞—Ü–∏—è</strong> - —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø–æ –æ–ø–∏—Å–∞–Ω–∏—é</p>
                                <div class="system-info">
                                    <div class="info-item">–í–ï–†–°–ò–Ø: <span>2.0</span></div>
                                    <div class="info-item">API: <span>Google –ñ–∞–Ω AI</span></div>
                                    <div class="info-item">–°–¢–ê–¢–£–°: <span class="status-online">–ì–û–¢–û–í</span></div>
                                </div>
                                <p style="margin-top: 15px; color: #a0a0ff; font-size: 0.9rem;">
                                    <i class="fas fa-info-circle"></i> –¢–µ–ø–µ—Ä—å —è —Ä–∞–±–æ—Ç–∞—é —á–µ—Ä–µ–∑ Google AI API –∏ –º–æ–≥—É –¥–∞–≤–∞—Ç—å —É–º–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã!
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- –û–±–ª–∞—Å—Ç—å –≤–≤–æ–¥–∞ —Å–æ–æ–±—â–µ–Ω–∏–π -->
                <div class="chat-input-area">
                    <div class="input-container">
                        <div class="input-wrapper">
                            <textarea 
                                id="message-input" 
                                placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –∏–ª–∏ –≤–æ–ø—Ä–æ—Å..." 
                                rows="3"
                                autocomplete="off"
                                autocorrect="off"
                                spellcheck="false"
                            ></textarea>
                            
                            <div class="input-buttons">
                                <button class="send-btn" id="send-message">
                                    <i class="fas fa-paper-plane"></i>
                                    <span class="btn-text">–û–¢–ü–†–ê–í–ò–¢–¨</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>

        <!-- –ù–∏–∂–Ω—è—è –ø–∞–Ω–µ–ª—å: –°—Ç–∞—Ç—É—Å –±–∞—Ä -->
        <footer class="status-bar">
            <div class="status-left">
                <div class="session-info">
                    <span>–°–ï–°–°–ò–Ø: <span id="session-id">GRID-NEURON-${Date.now().toString().slice(-6)}</span></span>
                    <span class="divider">|</span>
                    <span>–í–†–ï–ú–Ø: <span id="current-clock">00:00:00</span></span>
                </div>
            </div>
            
            <div class="status-center">
                <div class="connection-status">
                    <span class="conn-dot active"></span>
                    <span>API –ü–û–î–ö–õ–Æ–ß–ï–ù–ò–ï: <span id="connection-status">–ê–ö–¢–ò–í–ù–û</span></span>
                </div>
            </div>
        </footer>
    </div>

    <!-- Google AI API (Gemini) –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è -->
     <script src="keys.js"></script>
    <script type="module"> 
        
        // –ò–º–ø–æ—Ä—Ç Google AI SDK
        import { GoogleGenerativeAI } from "https://esm.run/@google/generative-ai";
        
        // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
        let currentTool = 'chat';
        let messageCount = 0;
        let geminiApi;
        let chatModel;
        let chatSession;
        
        // –í–∞—à API –∫–ª—é—á –¥–ª—è Google AI (Gemini)
        // –í–ê–ñ–ù–û: –î–ª—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ https://makersuite.google.com/app/apikey
        // ==========================================
// –í–∞—à API –∫–ª—é—á –¥–ª—è Google AI (Gemini)
        // ==========================================
        // üîê –ë–õ–û–ö –ö–õ–Æ–ß–ï–ô (–ò–°–ü–†–ê–í–õ–ï–ù–ù–´–ô –ò –ó–ê–©–ò–©–ï–ù–ù–´–ô)
        // ==========================================

        // 1. –ü—ã—Ç–∞–µ–º—Å—è –≤–∑—è—Ç—å –∫–ª—é—á–∏ –∏–∑ —Ñ–∞–π–ª–∞ keys.js. –ï—Å–ª–∏ –Ω–µ—Ç ‚Äî –±–µ—Ä–µ–º –∑–∞–≥–ª—É—à–∫—É.
        const ALL_KEYS = window.LOCAL_KEYS || [
            "–í–°–¢–ê–í–¨–¢–ï_–°–Æ–î–ê_–í–ê–®_API_–ö–õ–Æ–ß" 
        ];

        // 2. –í—ã–±–∏—Ä–∞–µ–º —Å–ª—É—á–∞–π–Ω—ã–π –∫–ª—é—á
        const randomKey = ALL_KEYS[Math.floor(Math.random() * ALL_KEYS.length)];

        // 3. üî• –ì–õ–ê–í–ù–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï:
        // .replace(/[^\x00-\x7F]/g, "") ‚Äî –£–î–ê–õ–Ø–ï–¢ –≤—Å–µ —Ä—É—Å—Å–∫–∏–µ –±—É–∫–≤—ã –∏ –Ω–µ–≤–∏–¥–∏–º—ã–µ —Å–∏–º–≤–æ–ª—ã.
        // .trim() ‚Äî —É–¥–∞–ª—è–µ—Ç –ø—Ä–æ–±–µ–ª—ã –ø–æ –∫—Ä–∞—è–º.
        // –≠—Ç–æ –ª–µ—á–∏—Ç –æ—à–∏–±–∫—É "failed to execute append on headers"
        const GEMINI_API_KEY = randomKey ? randomKey.replace(/[^\x00-\x7F]/g, "").trim() : "";

        // 4. –ü—Ä–æ–≤–µ—Ä–∫–∞: –ï—Å–ª–∏ –∫–ª—é—á –Ω–µ –Ω–∞—Å—Ç–æ—è—â–∏–π, –ø–∏—à–µ–º –æ—à–∏–±–∫—É –≤ –∫–æ–Ω—Å–æ–ª—å
        if (!window.LOCAL_KEYS || GEMINI_API_KEY.includes("–í–°–¢–ê–í–¨–¢–ï")) {
            console.error("üî¥ –û–®–ò–ë–ö–ê: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–ª—é—á-–∑–∞–≥–ª—É—à–∫–∞! –§–∞–π–ª keys.js –Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω –∏–ª–∏ –ø—É—Å—Ç.");
            // alert("–í–Ω–∏–º–∞–Ω–∏–µ: –§–∞–π–ª —Å –∫–ª—é—á–∞–º–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ keys.js"); // –†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π, –µ—Å–ª–∏ —Ö–æ—á–µ—à—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
        } else {
            console.log(`‚úÖ –£–°–ü–ï–•: –ó–∞–≥—Ä—É–∂–µ–Ω —Ä–∞–±–æ—á–∏–π –∫–ª—é—á (–ù–∞—á–∏–Ω–∞–µ—Ç—Å—è –Ω–∞: ${GEMINI_API_KEY.substring(0, 4)}...)`);
        }
        
        // ==========================================

// ==========================================
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Google AI
        async function initGoogleAI() {
            try {
                console.log("üöÄ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Google Gemini AI...");
                
                if (!GEMINI_API_KEY || GEMINI_API_KEY === "YOUR_API_KEY_HERE") {
                    console.warn("‚ö†Ô∏è API –∫–ª—é—á –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–µ–º–æ-—Ä–µ–∂–∏–º.");
                    showNotification("‚ö†Ô∏è API –∫–ª—é—á –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–µ–º–æ-—Ä–µ–∂–∏–º.", "warning");
                    return false;
                }
                
               // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Gemini API
geminiApi = new GoogleGenerativeAI(GEMINI_API_KEY);

// –ü–æ–ª—É—á–∞–µ–º –∞–∫—Ç—É–∞–ª—å–Ω—É—é –º–æ–¥–µ–ª—å Gemini (–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –û–î–ù–£ –∏–∑ —ç—Ç–∏—Ö –º–æ–¥–µ–ª–µ–π)
const model = geminiApi.getGenerativeModel({ 
    model: "gemini-flash-latest", // <-- –ó–ê–ú–ï–ù–ò–¢–ï –ù–ê –≠–¢–û
    generationConfig: {
        temperature: 0.7,
        topK: 1,
        topP: 0.95,
        maxOutputTokens: 2048,
    },
    safetySettings: [
        {
            category: "HARM_CATEGORY_HARASSMENT",
            threshold: "BLOCK_MEDIUM_AND_ABOVE"
        },
        {
            category: "HARM_CATEGORY_HATE_SPEECH",
            threshold: "BLOCK_MEDIUM_AND_ABOVE"
        },
        {
            category: "HARM_CATEGORY_SEXUALLY_EXPLICIT",
            threshold: "BLOCK_MEDIUM_AND_ABOVE"
        },
        {
            category: "HARM_CATEGORY_DANGEROUS_CONTENT",
            threshold: "BLOCK_MEDIUM_AND_ABOVE"
        }
    ]
});
                
                // –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—É—é —á–∞—Ç-—Å–µ—Å—Å–∏—é
                chatSession = model.startChat({
                    history: [
                        {
                            role: "user",
                            parts: [{ text: "–ü—Ä–∏–≤–µ—Ç! –¢—ã –ñ–∞–Ω AI - –æ—á–µ–Ω—å —É–º–Ω—ã–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç —Å —Ñ—É–Ω–∫—Ü–∏—è–º–∏ —á–∞—Ç–∞, –ø—Ä–æ–≤–µ—Ä–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏ –ø–æ–∏—Å–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞. –û—Ç–≤–µ—á–∞–π –Ω–∞ —Ä—É—Å—Å–∫–æ–º, –±—É–¥—å –ø–æ–ª–µ–∑–Ω—ã–º –∏ –¥—Ä—É–∂–µ–ª—é–±–Ω—ã–º." }]
                        },
                        {
                            role: "model",
                            parts: [{ text: "–ü—Ä–∏–≤–µ—Ç! –Ø –ñ–∞–Ω AI, –≤–∞—à —É–º–Ω—ã–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç. –ì–æ—Ç–æ–≤ –ø–æ–º–æ—á—å —Å –æ–±—â–µ–Ω–∏–µ–º, –ø—Ä–æ–≤–µ—Ä–∫–æ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ —Å–∞–π—Ç–æ–≤ –∏ –ø–æ–∏—Å–∫–æ–º –ª—é–±–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏, –∫–æ—Ç–æ—Ä–∞—è –≤–∞—Å –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç. –ß–µ–º –º–æ–≥—É –ø–æ–º–æ—á—å —Å–µ–≥–æ–¥–Ω—è?" }]
                        }
                    ]
                });
                
                console.log("‚úÖ Google Gemini AI –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω!");
                showNotification("‚úÖ Google Gemini AI –ø–æ–¥–∫–ª—é—á–µ–Ω!", "success");
                document.getElementById('ai-status').textContent = "–ñ–∞–Ω AI";
                document.getElementById('api-status').textContent = "GEMINI ACTIVE";
                
                return true;
            } catch (error) {
                console.error("‚ùå –û—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ Google AI:", error);
                showNotification("‚ùå –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Google AI. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–µ–º–æ-—Ä–µ–∂–∏–º.", "error");
                return false;
            }
        }
        
        // –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ Google AI
        async function sendToGoogleAI(message) {
            try {
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –Ω–∞–±–æ—Ä–∞
                showTypingIndicator();
                
                let response;
                
                if (chatSession) {
                    // –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ä–µ–∞–ª—å–Ω—ã–π Gemini API
                    const result = await chatSession.sendMessage(message);
                    response = result.response.text();
                } else {
                    // –î–µ–º–æ-—Ä–µ–∂–∏–º, –µ—Å–ª–∏ API –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω
                    await new Promise(resolve => setTimeout(resolve, 1500));
                    response = generateDemoResponse(message);
                }
                
                // –°–∫—Ä—ã–≤–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä
                hideTypingIndicator();
                
                // –î–æ–±–∞–≤–ª—è–µ–º –æ—Ç–≤–µ—Ç
                addMessage({
                    type: 'assistant',
                    content: response,
                    timestamp: new Date()
                });
                
            } catch (error) {
                console.error("‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ –∫ Google AI:", error);
                hideTypingIndicator();
                
                // –ó–∞–ø–∞—Å–Ω–æ–π –æ—Ç–≤–µ—Ç –≤ —Å–ª—É—á–∞–µ –æ—à–∏–±–∫–∏
                addMessage({
                    type: 'assistant',
                    content: `–ò–∑–≤–∏–Ω–∏—Ç–µ, –ø—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –∑–∞–ø—Ä–æ—Å–∞. ${error.message || '–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.'}`,
                    timestamp: new Date()
                });
            }
        }
        
        // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–µ–º–æ-–æ—Ç–≤–µ—Ç–∞ (–µ—Å–ª–∏ API –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç)
        function generateDemoResponse(message) {
            const lowerMsg = message.toLowerCase();
            
            // –ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –¥–ª—è —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤
            if (lowerMsg.includes('–ø—Ä–∏–≤–µ—Ç') || lowerMsg.includes('–∑–¥—Ä–∞–≤—Å—Ç–≤—É–π')) {
                return "–ü—Ä–∏–≤–µ—Ç! –†–∞–¥ –≤–∞—Å –≤–∏–¥–µ—Ç—å. –Ø –ñ–∞–Ω AI, –≤–∞—à —É–º–Ω—ã–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç. –ß–µ–º –º–æ–≥—É –ø–æ–º–æ—á—å?";
            } else if (lowerMsg.includes('–∫–∞–∫ –¥–µ–ª–∞') || lowerMsg.includes('–∫–∞–∫ —Ç—ã')) {
                return "–£ –º–µ–Ω—è –≤—Å–µ –æ—Ç–ª–∏—á–Ω–æ, —Å–ø–∞—Å–∏–±–æ! –ì–æ—Ç–æ–≤ –ø–æ–º–æ—á—å –≤–∞–º —Å –ª—é–±—ã–º–∏ –≤–æ–ø—Ä–æ—Å–∞–º–∏ –∏–ª–∏ –∑–∞–¥–∞—á–∞–º–∏.";
            } else if (lowerMsg.includes('—Å–ø–∞—Å–∏–±–æ') || lowerMsg.includes('–±–ª–∞–≥–æ–¥–∞—Ä—é')) {
                return "–í—Å–µ–≥–¥–∞ –ø–æ–∂–∞–ª—É–π—Å—Ç–∞! –û–±—Ä–∞—â–∞–π—Ç–µ—Å—å, –µ—Å–ª–∏ –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –µ—â–µ –ø–æ–º–æ—â—å.";
            } else if (lowerMsg.includes('–ø–æ–∫–∞') || lowerMsg.includes('–¥–æ —Å–≤–∏–¥–∞–Ω–∏—è')) {
                return "–î–æ —Å–≤–∏–¥–∞–Ω–∏—è! –ë—É–¥—É —Ä–∞–¥ –ø–æ–º–æ—á—å –≤–∞–º —Å–Ω–æ–≤–∞.";
            } else if (lowerMsg.includes('–ø–æ–º–æ—â—å') || lowerMsg.includes('—Ñ—É–Ω–∫—Ü–∏–∏')) {
                return "–Ø –º–æ–≥—É:\n1. üí¨ –û–±—â–∞—Ç—å—Å—è –Ω–∞ –ª—é–±—ã–µ —Ç–µ–º—ã (–∫–∞–∫ ChatGPT)\n2. üîí –ü—Ä–æ–≤–µ—Ä—è—Ç—å –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å —Å–∞–π—Ç–æ–≤\n3. üé® –ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –æ–ø–∏—Å–∞–Ω–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π\n\n–í—ã–±–µ—Ä–∏—Ç–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç —Å–ª–µ–≤–∞ –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ –∑–∞–¥–∞–π—Ç–µ –≤–æ–ø—Ä–æ—Å!";
            } else if (lowerMsg.includes('–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç') || lowerMsg.includes('—Å–∞–π—Ç')) {
                return "–î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ —Å–∞–π—Ç–∞ –≤—ã–±–µ—Ä–∏—Ç–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç '–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å' —Å–ª–µ–≤–∞ –∏ –≤–≤–µ–¥–∏—Ç–µ URL —Å–∞–π—Ç–∞.";
            } else if (lowerMsg.includes('–≥–µ–Ω–µ—Ä–∞—Ü') || lowerMsg.includes('–∏–∑–æ–±—Ä–∞–∂–µ–Ω')) {
                return "–î–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –≤—ã–±–µ—Ä–∏—Ç–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç '–ì–µ–Ω–µ—Ä–∞—Ü–∏—è' —Å–ª–µ–≤–∞ –∏ –æ–ø–∏—à–∏—Ç–µ —á—Ç–æ –≤—ã —Ö–æ—Ç–∏—Ç–µ —É–≤–∏–¥–µ—Ç—å.";
            } else if (lowerMsg.includes('–ø–æ–≥–æ–¥') || lowerMsg.includes('–≤—Ä–µ–º—è')) {
                const now = new Date();
                return `–°–µ–π—á–∞—Å ${now.toLocaleTimeString('ru-RU', {hour: '2-digit', minute: '2-digit'})}. –ü–æ–≥–æ–¥—É –º–æ–≥—É –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ –≤–∞—à–µ–º —Ä–µ–≥–∏–æ–Ω–µ, –Ω–æ –¥–ª—è —ç—Ç–æ–≥–æ –º–Ω–µ –Ω—É–∂–µ–Ω –¥–æ—Å—Ç—É–ø –∫ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º API.`;
            } else if (lowerMsg.includes('–Ω–æ–≤–æ—Å—Ç') || lowerMsg.includes('—Å–æ–±—ã—Ç–∏—è')) {
                return "–Ø –º–æ–≥—É –ø–æ–º–æ—á—å –Ω–∞–π—Ç–∏ –ø–æ—Å–ª–µ–¥–Ω–∏–µ –Ω–æ–≤–æ—Å—Ç–∏ –ø–æ –∏–Ω—Ç–µ—Ä–µ—Å—É—é—â–µ–π –≤–∞—Å —Ç–µ–º–µ. –£—Ç–æ—á–Ω–∏—Ç–µ, –∫–∞–∫–∏–µ –Ω–æ–≤–æ—Å—Ç–∏ –≤–∞—Å –∏–Ω—Ç–µ—Ä–µ—Å—É—é—Ç?";
            } else if (lowerMsg.includes('–∫–æ–¥') || lowerMsg.includes('–ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä')) {
                return "–Ø –º–æ–≥—É –ø–æ–º–æ—á—å —Å –∫–æ–¥–æ–º –Ω–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —è–∑—ã–∫–∞—Ö –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è. –ö–∞–∫–æ–π —è–∑—ã–∫ –≤–∞—Å –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç –∏ —á—Ç–æ –∏–º–µ–Ω–Ω–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å?";
            } else if (lowerMsg.includes('—Å–æ–≤–µ—Ç') || lowerMsg.includes('—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü')) {
                return "–° —É–¥–æ–≤–æ–ª—å—Å—Ç–≤–∏–µ–º –¥–∞–º —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏! –£—Ç–æ—á–Ω–∏—Ç–µ, –ø–æ –∫–∞–∫–æ–π —Ç–µ–º–µ –≤–∞–º –Ω—É–∂–µ–Ω —Å–æ–≤–µ—Ç?";
            }
            
            // –û–±—â–∏–µ –æ—Ç–≤–µ—Ç—ã
            const responses = [
                `–ò–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π –≤–æ–ø—Ä–æ—Å: "${message.substring(0, 50)}..."\n\n–Ø –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–ª –≤–∞—à –∑–∞–ø—Ä–æ—Å –∏ –º–æ–≥—É —Å–∫–∞–∑–∞—Ç—å, —á—Ç–æ —ç—Ç–æ –≤–∞–∂–Ω–∞—è —Ç–µ–º–∞. –û—Å–Ω–æ–≤–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ —Å—Ç–æ–∏—Ç —É—á–∏—Ç—ã–≤–∞—Ç—å...`,
                `–°–ø–∞—Å–∏–±–æ –∑–∞ –≤–∞—à –∑–∞–ø—Ä–æ—Å! "${message.substring(0, 40)}..."\n\n–ù–∞ –æ—Å–Ω–æ–≤–µ –º–æ–∏—Ö –∑–Ω–∞–Ω–∏–π –º–æ–≥—É –ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å —Å–ª–µ–¥—É—é—â–µ–µ:\n\n1. –ü–µ—Ä–≤—ã–π –≤–∞–∂–Ω—ã–π –∞—Å–ø–µ–∫—Ç\n2. –ö–ª—é—á–µ–≤–æ–π –º–æ–º–µ–Ω—Ç –¥–ª—è —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏—è\n3. –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏`,
                `–Ø –ø–æ–Ω—è–ª –≤–∞—à –≤–æ–ø—Ä–æ—Å –æ "${message.substring(0, 30)}..."\n\n–≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–∞—è —Ç–µ–º–∞. –í–æ—Ç —á—Ç–æ —è –º–æ–≥—É —Å–∫–∞–∑–∞—Ç—å –ø–æ —ç—Ç–æ–º—É –ø–æ–≤–æ–¥—É...`,
                `–û—Ç–ª–∏—á–Ω—ã–π –∑–∞–ø—Ä–æ—Å! "${message.substring(0, 40)}..."\n\n–í–æ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –º—ã—Å–ª–µ–π –ø–æ —ç—Ç–æ–º—É –ø–æ–≤–æ–¥—É:\n- –ü–µ—Ä–≤—ã–π –ø—É–Ω–∫—Ç –¥–ª—è —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏—è\n- –í—Ç–æ—Ä–æ–π –≤–∞–∂–Ω—ã–π –∞—Å–ø–µ–∫—Ç\n- –¢—Ä–µ—Ç–∏–π –∫–ª—é—á–µ–≤–æ–π –º–æ–º–µ–Ω—Ç\n- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏`,
                `–ü–æ –ø–æ–≤–æ–¥—É "${message.substring(0, 30)}..." –º–æ–≥—É —Å–∫–∞–∑–∞—Ç—å —Å–ª–µ–¥—É—é—â–µ–µ:\n\n–≠—Ç–æ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ñ–∞–∫—Ç–æ—Ä–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ —Å—Ç–æ–∏—Ç —É—á–µ—Å—Ç—å...`
            ];
            
            return responses[Math.floor(Math.random() * responses.length)];
        }
        
        // –û—Å—Ç–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –æ—Å—Ç–∞—é—Ç—Å—è –ø—Ä–∏–º–µ—Ä–Ω–æ —Ç–∞–∫–∏–º–∏ –∂–µ, –Ω–æ —Å —É–ª—É—á—à–µ–Ω–∏—è–º–∏...
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        document.addEventListener('DOMContentLoaded', async function() {
            console.log("üöÄ –ñ–ê–ù AI –∑–∞–≥—Ä—É–∂–µ–Ω");
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —á–∞—Å–æ–≤
            updateClock();
            setInterval(updateClock, 1000);
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Google AI
            const aiInitialized = await initGoogleAI();
            
            if (!aiInitialized) {
                console.log("‚ö†Ô∏è –†–∞–±–æ—Ç–∞—é –≤ –¥–µ–º–æ-—Ä–µ–∂–∏–º–µ");
            }
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
            initTools();
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å–æ–±—ã—Ç–∏–π
            initEventListeners();
            
            // –°–∏–º—É–ª—è—Ü–∏—è —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –º–µ—Ç—Ä–∏–∫
            startSystemMetrics();
            
            // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ ID —Å–µ—Å—Å–∏–∏
            document.getElementById('session-id').textContent = `GRID-${Date.now().toString().slice(-8)}`;
            
            // –§–æ–∫—É—Å –Ω–∞ –ø–æ–ª–µ –≤–≤–æ–¥–∞
            document.getElementById('message-input').focus();
        });
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏
        function updateClock() {
            const now = new Date();
            const timeStr = now.toLocaleTimeString('ru-RU', {hour12: false});
            document.getElementById('current-clock').textContent = timeStr;
            
            const timeEl = document.getElementById('current-time');
            if (timeEl) {
                timeEl.textContent = now.toLocaleTimeString('ru-RU', {hour: '2-digit', minute: '2-digit'});
            }
        }
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
        function initTools() {
            const tools = document.querySelectorAll('.tool-item');
            tools.forEach(tool => {
                tool.addEventListener('click', function() {
                    // –°–Ω–∏–º–∞–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å —Å–æ –≤—Å–µ—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
                    tools.forEach(t => t.classList.remove('active'));
                    
                    // –î–æ–±–∞–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å –≤—ã–±—Ä–∞–Ω–Ω–æ–º—É
                    this.classList.add('active');
                    
                    // –ü–æ–ª—É—á–∞–µ–º —Ç–∏–ø –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞
                    const toolType = this.getAttribute('data-tool');
                    currentTool = toolType;
                    
                    // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
                    updateUIForTool(toolType);
                    
                    console.log(`üõ†Ô∏è –í—ã–±—Ä–∞–Ω –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç: ${toolType}`);
                });
            });
        }
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞
function updateUIForTool(toolType) {
    
    // 1. –°–Ω–∞—á–∞–ª–∞ —Å–∫—Ä—ã–≤–∞–µ–º –í–°–ï –ø–∞–Ω–µ–ª–∏
    const urlContainer = document.getElementById('url-input-container');
    const searchContainer = document.getElementById('search-container');

    if (urlContainer) urlContainer.style.display = 'none';
    if (searchContainer) searchContainer.style.display = 'none';
    
    // –û–±–Ω–æ–≤–ª—è–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫ —á–∞—Ç–∞
    const titles = {
        'chat': '–ß–ê–¢ –° –ù–ï–ô–†–û–°–ï–¢–¨–Æ',
        'security': '–ü–†–û–í–ï–†–ö–ê –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–ò –°–ê–ô–¢–û–í',
        'search': '–ò–ù–¢–ï–õ–õ–ï–ö–¢–£–ê–õ–¨–ù–´–ô –ü–û–ò–°–ö'
    };
    
    const titleEl = document.getElementById('chat-title');
    if (titleEl) titleEl.textContent = titles[toolType] || '–ß–ê–¢';
    
    // 2. –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ù–£–ñ–ù–£–Æ –ø–∞–Ω–µ–ª—å
    if (toolType === 'security') {
        if (urlContainer) urlContainer.style.display = 'block';
        } else if (toolType === 'search') {
        if (searchContainer) {
            searchContainer.style.display = 'block';
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
            initSearchCategories();
        }
    }
    
    // –û–±–Ω–æ–≤–ª—è–µ–º placeholder –≤ –ø–æ–ª–µ –≤–≤–æ–¥–∞
    const placeholders = {
        'chat': '–ó–∞–¥–∞–π—Ç–µ –ª—é–±–æ–π –≤–æ–ø—Ä–æ—Å –Ω–µ–π—Ä–æ—Å–µ—Ç–∏...',
        'security': '–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –∏–ª–∏ URL —Å–∞–π—Ç–∞ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏...',
        'search': '–í–≤–µ–¥–∏—Ç–µ –∑–∞–ø—Ä–æ—Å –¥–ª—è –ø–æ–∏—Å–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏...'
    };
    
    const inputEl = document.getElementById('message-input');
    if (inputEl) inputEl.placeholder = placeholders[toolType] || '–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ...';
}
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å–æ–±—ã—Ç–∏–π
function initEventListeners() {
    const searchButton = document.getElementById('perform-search');
    if (searchButton) {
        searchButton.addEventListener('click', function(e) {
            e.preventDefault();
            e.stopPropagation();
            console.log('–ö–Ω–æ–ø–∫–∞ –ø–æ–∏—Å–∫–∞ –Ω–∞–∂–∞—Ç–∞');
            performSearch();
        });
        console.log('–û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–±—ã—Ç–∏—è –¥–ª—è –∫–Ω–æ–ø–∫–∏ –ø–æ–∏—Å–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω');
    } else {
        console.warn('–ö–Ω–æ–ø–∫–∞ –ø–æ–∏—Å–∫–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏');
    }
    
    // –ö–Ω–æ–ø–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è
    document.getElementById('send-message').addEventListener('click', sendMessage);
    
    // Enter –≤ –ø–æ–ª–µ –ø–æ–∏—Å–∫–∞
    const searchInput = document.getElementById('search-query');
    if (searchInput) {
        searchInput.addEventListener('keydown', function(e) {
            console.log('Key pressed:', e.key, 'Code:', e.keyCode); // –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
            if (e.key === 'Enter') {
                e.preventDefault();
                e.stopPropagation();
                console.log('Enter detected, calling performSearch...'); // –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
                performSearch();
                return false;
            }
        });
    }
            
            // –ö–Ω–æ–ø–∫–∞ –æ—á–∏—Å—Ç–∫–∏ —á–∞—Ç–∞
            document.getElementById('clear-chat').addEventListener('click', function() {
                if (confirm('–û—á–∏—Å—Ç–∏—Ç—å –≤—Å—é –∏—Å—Ç–æ—Ä–∏—é —á–∞—Ç–∞?')) {
                    clearChat();
                }
            });
            
            // –ö–Ω–æ–ø–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ URL (–ò–°–ü–†–ê–í–õ–ï–ù–ù–ê–Ø)
document.getElementById('check-url-btn').addEventListener('click', function() {
    const url = document.getElementById('url-input').value.trim();
    if (!url) {
        showNotification('–í–≤–µ–¥–∏—Ç–µ URL —Å–∞–π—Ç–∞ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏', 'warning');
        return;
    }
    
    // –ú—ã –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–ø—Ä–æ—Å –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é —Ñ—É–Ω–∫—Ü–∏—é analyzeSecurity
    analyzeSecurity(url); 
    
    // –û—á–∏—â–∞–µ–º –ø–æ–ª–µ –≤–≤–æ–¥–∞ –≤ —Å–∞–π–¥–±–∞—Ä–µ –¥–ª—è –∫—Ä–∞—Å–æ—Ç—ã
    document.getElementById('url-input').value = '';
});
            
            // –ö–Ω–æ–ø–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
            document.getElementById('generate-image-btn').addEventListener('click', function() {
                const prompt = document.getElementById('image-prompt').value.trim();
                if (!prompt) {
                    showNotification('–û–ø–∏—à–∏—Ç–µ —á—Ç–æ –≤—ã —Ö–æ—Ç–∏—Ç–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å', 'warning');
                    return;
                }
                
                generateImage(prompt);
            });
            
            // –í–≤–æ–¥ –≤ URL –ø–æ–ª–µ
            document.getElementById('url-input').addEventListener('keydown', function(e) {
                if (e.key === 'Enter') {
                    e.preventDefault();
                    document.getElementById('check-url-btn').click();
                }
            });
            
            // –í–≤–æ–¥ –≤ –ø–æ–ª–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
            document.getElementById('image-prompt').addEventListener('keydown', function(e) {
                if (e.key === 'Enter' && e.ctrlKey) {
                    e.preventDefault();
                    document.getElementById('generate-image-btn').click();
                }
            });
        }
        
        // –û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è
        function sendMessage() {
    const input = document.getElementById('message-input');
    const message = input.value.trim();
    
    if (!message) {
        showNotification('–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ', 'warning');
        return;
    }
    
    // –î–æ–±–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    addMessage({
        type: 'user',
        content: message,
        timestamp: new Date()
    });
    
    // –û—á–∏—â–∞–µ–º –ø–æ–ª–µ –≤–≤–æ–¥–∞
    input.value = '';
    input.focus();
    
    // –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞
    if (currentTool === 'chat') {
        sendToGoogleAI(message);
    } else if (currentTool === 'security') {
        analyzeSecurity(message);
    } else if (currentTool === 'search') { // –î–æ–±–∞–≤–∏—Ç—å —ç—Ç–æ—Ç –±–ª–æ–∫
        // –ò—Å–ø–æ–ª—å–∑—É–µ–º –ø–æ–ª–µ –ø–æ–∏—Å–∫–∞ –≤ –ª–µ–≤–æ–π –ø–∞–Ω–µ–ª–∏
        document.getElementById('search-query').value = message;
        performSearch();
    }
}
        
        // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ —á–∞—Ç
        function addMessage(message) {
            const container = document.getElementById('chat-messages');
            
            const messageEl = document.createElement('div');
            messageEl.className = `message-bubble ${message.type}`;
            
            const time = message.timestamp.toLocaleTimeString('ru-RU', {hour: '2-digit', minute: '2-digit'});
            
            messageEl.innerHTML = `
                <div class="message-header">
                    <span class="message-avatar">${message.type === 'user' ? 'üë§' : 'ü§ñ'}</span>
                    <span class="message-author">${message.type === 'user' ? '–í–´' : '–ñ–∞–Ω AI'}</span>
                    <span class="message-time">${time}</span>
                </div>
                <div class="message-content">
                    ${formatMessageContent(message.content)}
                </div>
            `;
            
            container.appendChild(messageEl);
            
            // –ü—Ä–æ–∫—Ä—É—Ç–∫–∞ –≤–Ω–∏–∑ –∫ –ø–æ—Å–ª–µ–¥–Ω–µ–º—É —Å–æ–æ–±—â–µ–Ω–∏—é
            container.scrollTop = container.scrollHeight;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Å—á–µ—Ç—á–∏–∫
            messageCount++;
            document.getElementById('message-count').textContent = messageCount;
        }
        
        // –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
        function formatMessageContent(content) {
            // –ó–∞–º–µ–Ω—è–µ–º –ø–µ—Ä–µ–Ω–æ—Å—ã —Å—Ç—Ä–æ–∫ –Ω–∞ <br>
            let formatted = content.replace(/\n/g, '<br>');
            
            // –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ URL
            formatted = formatted.replace(
                /(https?:\/\/[^\s]+)/g, 
                '<a href="$1" target="_blank" style="color: #00aaff; text-decoration: none;">$1</a>'
            );
            
            // –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ **–∂–∏—Ä–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞**
            formatted = formatted.replace(
                /\*\*(.*?)\*\*/g, 
                '<strong>$1</strong>'
            );
            
            return formatted;
        }
    
        // –ü–æ–∫–∞–∑–∞—Ç—å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –Ω–∞–±–æ—Ä–∞
        function showTypingIndicator() {
            const container = document.getElementById('chat-messages');
            
            // –£–¥–∞–ª—è–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä, –µ—Å–ª–∏ –µ—Å—Ç—å
            hideTypingIndicator();
            
            const typingEl = document.createElement('div');
            typingEl.id = 'typing-indicator';
            typingEl.className = 'message-bubble assistant';
            typingEl.innerHTML = `
                <div class="message-header">
                    <span class="message-avatar">ü§ñ</span>
                    <span class="message-author">–ñ–∞–Ω AI</span>
                </div>
                <div class="message-content">
                    <div style="display: flex; align-items: center; gap: 8px; color: #00ffea;">
                        <div class="typing-dot" style="animation-delay: 0s;"></div>
                        <div class="typing-dot" style="animation-delay: 0.2s;"></div>
                        <div class="typing-dot" style="animation-delay: 0.4s;"></div>
                        <span style="margin-left: 10px;">–û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é –∑–∞–ø—Ä–æ—Å...</span>
                    </div>
                </div>
            `;
            
            container.appendChild(typingEl);
            container.scrollTop = container.scrollHeight;
        }
        
        // –°–∫—Ä—ã—Ç—å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –Ω–∞–±–æ—Ä–∞
        function hideTypingIndicator() {
            const typingEl = document.getElementById('typing-indicator');
            if (typingEl) {
                typingEl.remove();
            }
        }
        
        // ==========================================
        // üîê –†–ï–ê–õ–¨–ù–´–ô AI –ê–ù–ê–õ–ò–ó –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–ò
        // ==========================================
        
        async function analyzeSecurity(url) {
            // –û—á–∏—â–∞–µ–º URL
            url = url.trim();
            if (!url) return;

            // 1. –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≤ —á–∞—Ç–µ, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–ø—Ä–æ—Å–∏–ª –ø—Ä–æ–≤–µ—Ä–∫—É
            addMessage({
                type: 'user',
                content: `üîç –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å: ${url}`,
                timestamp: new Date()
            });
            
            showTypingIndicator();
            
            try {
                // 2. –§–æ—Ä–º–∏—Ä—É–µ–º —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –ø—Ä–æ–º–ø—Ç –¥–ª—è –Ω–µ–π—Ä–æ—Å–µ—Ç–∏
                // –ú—ã –ø—Ä–æ—Å–∏–º –µ—ë —Å—Ç–∞—Ç—å —ç–∫—Å–ø–µ—Ä—Ç–æ–º –ø–æ –∫–∏–±–µ—Ä–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
                const securityPrompt = `
                    –†–û–õ–¨: –¢—ã —ç–∫—Å–ø–µ—Ä—Ç –ø–æ –∫–∏–±–µ—Ä–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (CyberSecurity Analyst).
                    –ó–ê–î–ê–ß–ê: –ü—Ä–æ–≤–µ–¥–∏ –∞–Ω–∞–ª–∏–∑ URL: "${url}"
                    
                    –¢–í–û–ò –î–ï–ô–°–¢–í–ò–Ø:
                    1. –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π —Å–∞–º—É —Å—Å—ã–ª–∫—É (–Ω–µ—Ç –ª–∏ –ø–æ–¥–º–µ–Ω—ã –±—É–∫–≤, —Å—Ç—Ä–∞–Ω–Ω—ã–π –¥–æ–º–µ–Ω).
                    2. –û—Ü–µ–Ω–∏ —Ä–µ–ø—É—Ç–∞—Ü–∏—é —ç—Ç–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞/—Å–∞–π—Ç–∞ (–∑–Ω–∞–µ—à—å –ª–∏ —Ç—ã –µ–≥–æ –∫–∞–∫ –Ω–∞–¥–µ–∂–Ω—ã–π?).
                    3. –î–∞–π —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏.

                    –§–û–†–ú–ê–¢ –û–¢–í–ï–¢–ê (–°—Ç—Ä–æ–≥–æ HTML, –±–µ–∑ Markdown):
                    –ò—Å–ø–æ–ª—å–∑—É–π —ç—Ç–æ—Ç —à–∞–±–ª–æ–Ω –¥–ª—è –≤—ã–≤–æ–¥–∞:
                    
                    üîê <strong>–û–¢–ß–ï–¢ –û –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–ò</strong><br><br>
                    <strong>–¶–µ–ª—å:</strong> <a href="${url}" target="_blank" style="color: #00aaff;">${url}</a><br>
                    <strong>–í–µ—Ä–¥–∏–∫—Ç:</strong> [–ë–ï–ó–û–ü–ê–°–ù–û / –ü–û–î–û–ó–†–ò–¢–ï–õ–¨–ù–û / –û–ü–ê–°–ù–û] (–≤—ã–±–µ—Ä–∏ –∏ –≤—ã–¥–µ–ª–∏ —Ü–≤–µ—Ç–æ–º: –∑–µ–ª–µ–Ω—ã–π/–∂–µ–ª—Ç—ã–π/–∫—Ä–∞—Å–Ω—ã–π)<br><br>
                    
                    <strong>üìã –ê–ù–ê–õ–ò–ó:</strong><br>
                    ‚Ä¢ <strong>–î–æ–º–µ–Ω:</strong> [–û—Ü–µ–Ω–∫–∞ –¥–æ–º–µ–Ω–∞]<br>
                    ‚Ä¢ <strong>–†–∏—Å–∫–∏:</strong> [–ï—Å—Ç—å –ª–∏ –ø—Ä–∏–∑–Ω–∞–∫–∏ —Ñ–∏—à–∏–Ω–≥–∞?]<br>
                    ‚Ä¢ <strong>SSL/HTTPS:</strong> [–ï—Å—Ç—å –ª–∏ https –≤ —Å—Å—ã–ª–∫–µ?]<br><br>
                    
                    <strong>üí° –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–Ø –≠–ö–°–ü–ï–†–¢–ê:</strong><br>
                    [–¢–≤–æ–π –∫—Ä–∞—Ç–∫–∏–π –≤—ã–≤–æ–¥: –º–æ–∂–Ω–æ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –∏–ª–∏ –Ω–µ—Ç?]
                `;

                let responseText;
                
                // 3. –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–ø—Ä–æ—Å –≤ Google AI
                if (chatSession) {
                    const result = await chatSession.sendMessage(securityPrompt);
                    responseText = result.response.text();
                } else {
                    responseText = "‚ö†Ô∏è <strong>–û–®–ò–ë–ö–ê:</strong> AI –Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω. –ù–µ –º–æ–≥—É –≤—ã–ø–æ–ª–Ω–∏—Ç—å —Ä–µ–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑.";
                }

                hideTypingIndicator();

                // 4. –í—ã–≤–æ–¥–∏–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
                addMessage({
                    type: 'assistant',
                    content: responseText, 
                    timestamp: new Date()
                });

            } catch (error) {
                console.error("–û—à–∏–±–∫–∞ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è:", error);
                hideTypingIndicator();
                addMessage({
                    type: 'assistant',
                    content: `‚ùå <strong>–û–®–ò–ë–ö–ê –ê–ù–ê–õ–ò–ó–ê</strong><br>–ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º AI. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.`,
                    timestamp: new Date()
                });
            }
        }
        
        // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–∞ –æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
        function generateSecurityReport(url) {
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å URL
            let isValidUrl = true;
            try {
                new URL(url);
            } catch {
                isValidUrl = false;
            }
            
            if (!isValidUrl) {
                return `‚ùå <strong>–ù–ï–ö–û–†–†–ï–ö–¢–ù–´–ô URL</strong><br><br>
                "${url}" –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –≤–∞–ª–∏–¥–Ω—ã–º URL.<br>
                –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∞–¥—Ä–µ—Å –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å http:// –∏–ª–∏ https://`;
            }
            
            // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–ª—É—á–∞–π–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –æ—Ç—á–µ—Ç–∞
            const securityLevels = ['–í–´–°–û–ö–ò–ô', '–°–†–ï–î–ù–ò–ô', '–ù–ò–ó–ö–ò–ô'];
            const securityLevel = securityLevels[Math.floor(Math.random() * securityLevels.length)];
            
            const hasSSL = Math.random() > 0.15;
            const malwareDetected = Math.random() > 0.85;
            const phishingRisk = Math.random() > 0.7;
            const outdatedSoftware = Math.random() > 0.5;
            const secureHeaders = Math.random() > 0.3;
            const encryptionStrength = Math.random() > 0.4 ? '–°–ò–õ–¨–ù–ê–Ø' : '–°–õ–ê–ë–ê–Ø';
            
            let report = `üîê <strong>–û–¢–ß–ï–¢ –û –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–ò</strong><br><br>`;
            report += `<strong>–ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º—ã–π —Å–∞–π—Ç:</strong> <a href="${url}" target="_blank">${url}</a><br><br>`;
            
            report += `<strong>–û–ë–©–ê–Ø –û–¶–ï–ù–ö–ê –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–ò:</strong> <span style="color: ${securityLevel === '–í–´–°–û–ö–ò–ô' ? '#00ff55' : securityLevel === '–°–†–ï–î–ù–ò–ô' ? '#ffff00' : '#ff5555'}">${securityLevel}</span><br><br>`;
            
            report += `<strong>–î–ï–¢–ê–õ–¨–ù–´–ô –ê–ù–ê–õ–ò–ó:</strong><br>`;
            report += `${hasSSL ? '‚úÖ' : '‚ùå'} SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç: ${hasSSL ? '–ü–†–ò–°–£–¢–°–¢–í–£–ï–¢' : '–û–¢–°–£–¢–°–¢–í–£–ï–¢'}<br>`;
            report += `${malwareDetected ? '‚ùå' : '‚úÖ'} –í—Ä–µ–¥–æ–Ω–æ—Å–Ω–æ–µ –ü–û: ${malwareDetected ? '–û–ë–ù–ê–†–£–ñ–ï–ù–û' : '–ù–ï –û–ë–ù–ê–†–£–ñ–ï–ù–û'}<br>`;
            report += `${phishingRisk ? '‚ö†Ô∏è' : '‚úÖ'} –§–∏—à–∏–Ω–≥ —Ä–∏—Å–∫: ${phishingRisk ? '–í–´–°–û–ö–ò–ô' : '–ù–ò–ó–ö–ò–ô'}<br>`;
            report += `${outdatedSoftware ? '‚ö†Ô∏è' : '‚úÖ'} –£—Å—Ç–∞—Ä–µ–≤—à–µ–µ –ü–û: ${outdatedSoftware ? '–û–ë–ù–ê–†–£–ñ–ï–ù–û' : '–ù–ï –û–ë–ù–ê–†–£–ñ–ï–ù–û'}<br>`;
            report += `${secureHeaders ? '‚úÖ' : '‚ùå'} –ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏: ${secureHeaders ? '–ù–ê–°–¢–†–û–ï–ù–´' : '–û–¢–°–£–¢–°–¢–í–£–Æ–¢'}<br>`;
            report += `üîê –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ: ${encryptionStrength}<br><br>`;
            
            if (securityLevel === '–ù–ò–ó–ö–ò–ô' || malwareDetected || phishingRisk) {
                report += `<strong>‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ü–†–û–ë–õ–ï–ú–´:</strong><br>`;
                if (!hasSSL) report += `‚Ä¢ –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç<br>`;
                if (malwareDetected) report += `‚Ä¢ –£–¥–∞–ª–∏—Ç–µ –≤—Ä–µ–¥–æ–Ω–æ—Å–Ω–æ–µ –ü–û<br>`;
                if (phishingRisk) report += `‚Ä¢ –£—Å—Ç—Ä–∞–Ω–∏—Ç–µ —Ñ–∏—à–∏–Ω–≥–æ–≤—ã–µ —É–≥—Ä–æ–∑—ã<br>`;
                if (outdatedSoftware) report += `‚Ä¢ –û–±–Ω–æ–≤–∏—Ç–µ CMS –∏ –ø–ª–∞–≥–∏–Ω—ã<br>`;
                if (!secureHeaders) report += `‚Ä¢ –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ HTTP –∑–∞–≥–æ–ª–æ–≤–∫–∏<br>`;
                report += `<br>`;
            }
            
            report += `<strong>‚úÖ –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò:</strong><br>`;
            report += `1. –†–µ–≥—É–ª—è—Ä–Ω–æ –æ–±–Ω–æ–≤–ª—è–π—Ç–µ –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∞–π—Ç–∞<br>`;
            report += `2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –Ω–∞–¥–µ–∂–Ω—ã–µ –ø–∞—Ä–æ–ª–∏ –∏ 2FA<br>`;
            report += `3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –±—Ä–∞–Ω–¥–º–∞—É—ç—Ä –∏ WAF<br>`;
            report += `4. –†–µ–≥—É–ª—è—Ä–Ω–æ –¥–µ–ª–∞–π—Ç–µ —Ä–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏<br>`;
            report += `5. –ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –Ω–∞ —Å–∞–π—Ç–µ<br>`;
            
            return report;
        }
        
       async function generateImage(prompt) {
    addMessage({
        type: 'user',
        content: `üé® –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å: ${prompt}`,
        timestamp: new Date()
    });
    
    showTypingIndicator();
    
    try {
        // –í–ê–†–ò–ê–ù–¢ A: Stable Diffusion —á–µ—Ä–µ–∑ —Ä–∞–±–æ—Ç–∞—é—â–∏–π —Å–µ—Ä–≤–∏—Å
        console.log("üîÑ –ü—Ä–æ–±—É—é Hugging Face API...");
        
        const response = await fetch("https://api-inference.huggingface.co/models/stabilityai/stable-diffusion-xl-base-1.0", {
            method: "POST",
            headers: { 
                "Authorization": "Bearer ", // –ö–ª—é—á —É–¥–∞–ª–µ–Ω –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏,
                "Content-Type": "application/json"
            },
            body: JSON.stringify({ 
                inputs: prompt + ", high quality, detailed, masterpiece",
                parameters: {
                    num_inference_steps: 20,
                    guidance_scale: 7.5
                }
            }),
        });
        
        console.log("üìä –°—Ç–∞—Ç—É—Å Hugging Face:", response.status);
        
        if (response.status === 200) {
            const blob = await response.blob();
            const imageUrl = URL.createObjectURL(blob);
            
            hideTypingIndicator();
            
            const html = `
                üé® <strong>–ò–ó–û–ë–†–ê–ñ–ï–ù–ò–ï –°–ì–ï–ù–ï–†–ò–†–û–í–ê–ù–û!</strong><br><br>
                <strong>–ó–∞–ø—Ä–æ—Å:</strong> "${prompt}"<br><br>
                <div style="text-align: center; background: rgba(0,0,0,0.1); padding: 15px; border-radius: 10px;">
                    <img src="${imageUrl}" 
                         style="max-width: 100%; max-height: 400px; border-radius: 8px; border: 2px solid #00ffea; box-shadow: 0 0 20px rgba(0,255,234,0.2);">
                </div><br>
                <small>‚ú® Stable Diffusion XL | Hugging Face API</small><br>
                <button onclick="window.open('${imageUrl}', '_blank')" 
                        style="margin-top: 10px; background: #00aaff; color: white; padding: 8px 15px; border-radius: 5px; border: none; cursor: pointer;">
                    üîó –û—Ç–∫—Ä—ã—Ç—å –æ—Ä–∏–≥–∏–Ω–∞–ª
                </button>
            `;
            
            addMessage({
                type: 'assistant',
                content: html,
                timestamp: new Date()
            });
            
            return;
        } else {
            console.log("‚ùå Hugging Face —Å—Ç–∞—Ç—É—Å –Ω–µ 200, –ø—Ä–æ–±—É—é –≤–∞—Ä–∏–∞–Ω—Ç B...");
            throw new Error(`Hugging Face –æ—Ç–≤–µ—Ç–∏–ª: ${response.status}`);
        }
        
    } catch (error) {
        console.error("‚ùå –û—à–∏–±–∫–∞ –≤–∞—Ä–∏–∞–Ω—Ç A:", error);
        await tryVariantB(prompt);
    }
}

async function tryVariantB(prompt) {
    try {
        console.log("üîÑ –ü—Ä–æ–±—É—é DeepAI...");
        
        const response = await fetch("https://api.deepai.org/api/text2img", {
            method: "POST",
            headers: {
                "Content-Type": "application/json",
            },
            body: JSON.stringify({
                text: prompt + ", detailed, high quality",
                grid_size: "1",
                width: "512",
                height: "512"
            })
        });
        
        const data = await response.json();
        console.log("üìä DeepAI –æ—Ç–≤–µ—Ç:", data);
        
        if (data.output_url) {
            hideTypingIndicator();
            
            const html = `
                üé® <strong>–ò–ó–û–ë–†–ê–ñ–ï–ù–ò–ï (DeepAI)</strong><br><br>
                <strong>–ó–∞–ø—Ä–æ—Å:</strong> "${prompt}"<br><br>
                <div style="text-align: center;">
                    <img src="${data.output_url}" 
                         style="max-width: 100%; max-height: 400px; border-radius: 10px; border: 2px solid #00aaff;">
                </div><br>
                <small>‚ú® DeepAI | –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π API</small>
            `;
            
            addMessage({
                type: 'assistant',
                content: html,
                timestamp: new Date()
            });
        } else {
            throw new Error("–ù–µ—Ç URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ –æ—Ç–≤–µ—Ç–µ DeepAI");
        }
        
    } catch (error) {
        console.error("‚ùå –û—à–∏–±–∫–∞ –≤–∞—Ä–∏–∞–Ω—Ç B:", error);
        await tryVariantC(prompt);
    }
}

async function tryVariantC(prompt) {
    try {
        console.log("üîÑ –ü—Ä–æ–±—É—é Pollinations v2...");
        
        const encodedPrompt = encodeURIComponent(prompt);
        const imageUrl = `https://pollinations.ai/p/${encodedPrompt}?width=512&height=512&seed=${Date.now()}&style=anime`;
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∑–∞–≥—Ä—É–∑–∫—É –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
        const imgCheck = new Image();
        
        const loadPromise = new Promise((resolve, reject) => {
            imgCheck.onload = () => resolve(true);
            imgCheck.onerror = () => reject(false);
            setTimeout(() => reject(false), 15000); // 15 —Å–µ–∫—É–Ω–¥ –Ω–∞ –∑–∞–≥—Ä—É–∑–∫—É
        });
        
        imgCheck.src = imageUrl;
        const loaded = await loadPromise;
        
        if (loaded) {
            hideTypingIndicator();
            
            const html = `
                üé® <strong>–ò–ó–û–ë–†–ê–ñ–ï–ù–ò–ï (Pollinations v2)</strong><br><br>
                <strong>–ó–∞–ø—Ä–æ—Å:</strong> "${prompt}"<br><br>
                <div style="text-align: center;">
                    <img src="${imageUrl}" 
                         style="max-width: 100%; max-height: 400px; border-radius: 10px; border: 2px solid #800080;">
                </div><br>
                <small>‚ú® Pollinations.ai | –ù–æ–≤–∞—è –≤–µ—Ä—Å–∏—è</small>
            `;
            
            addMessage({
                type: 'assistant',
                content: html,
                timestamp: new Date()
            });
        } else {
            throw new Error("Pollinations –Ω–µ –∑–∞–≥—Ä—É–∑–∏–ª –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ");
        }
        
    } catch (error) {
        console.error("‚ùå –û—à–∏–±–∫–∞ –≤–∞—Ä–∏–∞–Ω—Ç C:", error);
        generateSimpleImage(prompt);
    }
}

function generateSimpleImage(prompt) {
    console.log("üîÑ –ò—Å–ø–æ–ª—å–∑—É—é –ª–æ–∫–∞–ª—å–Ω—É—é –≥–µ–Ω–µ—Ä–∞—Ü–∏—é...");
    
    const canvas = document.createElement('canvas');
    canvas.width = 512;
    canvas.height = 512;
    const ctx = canvas.getContext('2d');
    
    // –û–ø—Ä–µ–¥–µ–ª—è–µ–º, —á—Ç–æ —Ä–∏—Å–æ–≤–∞—Ç—å
    const lowerPrompt = prompt.toLowerCase();
    
    if (lowerPrompt.includes('–∫–æ—Ç') || lowerPrompt.includes('–∫–æ—Ç–∏–∫') || lowerPrompt.includes('–∫–æ—à–∫–∞')) {
        drawCat(ctx, lowerPrompt.includes('—Å–∏–≥–∞—Ä'));
    } else if (lowerPrompt.includes('–ø–µ–π–∑–∞–∂') || lowerPrompt.includes('–ø—Ä–∏—Ä–æ–¥')) {
        drawLandscape(ctx);
    } else if (lowerPrompt.includes('–ø–æ—Ä—Ç—Ä–µ—Ç') || lowerPrompt.includes('–ª–∏—Ü–æ')) {
        drawPortrait(ctx);
    } else {
        drawGeneric(ctx, prompt);
    }
    
    const imageUrl = canvas.toDataURL('image/png');
    hideTypingIndicator();
    
    const html = `
        üé® <strong>–ò–ó–û–ë–†–ê–ñ–ï–ù–ò–ï (–õ–æ–∫–∞–ª—å–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è)</strong><br><br>
        <strong>–ó–∞–ø—Ä–æ—Å:</strong> "${prompt}"<br><br>
        <div style="text-align: center; background: rgba(0,0,0,0.05); padding: 15px; border-radius: 10px;">
            <img src="${imageUrl}" 
                 style="max-width: 100%; max-height: 400px; border-radius: 8px; border: 2px solid #FFA500;">
        </div><br>
        <small>‚ö†Ô∏è –ë—Ä–∞—É–∑–µ—Ä–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è | –î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞</small><br>
        <small>–î–ª—è —Ñ–æ—Ç–æ—Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –ø–æ–¥–∫–ª—é—á–∏—Ç–µ Stable Diffusion API</small>
    `;
    
    addMessage({
        type: 'assistant',
        content: html,
        timestamp: new Date()
    });
}

// === –§–£–ù–ö–¶–ò–ò –†–ò–°–û–í–ê–ù–ò–Ø ===

function drawCat(ctx, hasCigar) {
    // –†–∏—Å—É–µ–º —Å–∏–º–ø–∞—Ç–∏—á–Ω–æ–≥–æ –∫–æ—Ç–∏–∫–∞
    ctx.fillStyle = '#FFD700';
    ctx.fillRect(0, 0, 512, 512);
    
    // –¢–µ–ª–æ
    ctx.fillStyle = '#8B4513';
    ctx.beginPath();
    ctx.ellipse(256, 320, 120, 90, 0, 0, Math.PI * 2);
    ctx.fill();
    
    // –ì–æ–ª–æ–≤–∞
    ctx.beginPath();
    ctx.arc(256, 200, 80, 0, Math.PI * 2);
    ctx.fill();
    
    // –°–∏–≥–∞—Ä–∞ –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
    if (hasCigar) {
        ctx.fillStyle = '#8B7355';
        ctx.fillRect(340, 190, 50, 8);
        ctx.fillStyle = '#FF4500';
        ctx.beginPath();
        ctx.arc(395, 194, 6, 0, Math.PI * 2);
        ctx.fill();
        
        // –î—ã–º
        ctx.fillStyle = 'rgba(200, 200, 200, 0.7)';
        ctx.beginPath();
        ctx.arc(410, 180, 15, 0, Math.PI * 2);
        ctx.arc(425, 165, 12, 0, Math.PI * 2);
        ctx.arc(440, 155, 10, 0, Math.PI * 2);
        ctx.fill();
    }
    
    // –ì–ª–∞–∑–∞
    ctx.fillStyle = '#FFFFFF';
    ctx.beginPath();
    ctx.arc(220, 190, 18, 0, Math.PI * 2);
    ctx.arc(292, 190, 18, 0, Math.PI * 2);
    ctx.fill();
    
    ctx.fillStyle = '#000000';
    ctx.beginPath();
    ctx.arc(220, 190, 9, 0, Math.PI * 2);
    ctx.arc(292, 190, 9, 0, Math.PI * 2);
    ctx.fill();
    
    // –ù–æ—Å
    ctx.fillStyle = '#FF69B4';
    ctx.beginPath();
    ctx.arc(256, 220, 12, 0, Math.PI * 2);
    ctx.fill();
    
    // –£—Å—ã
    ctx.strokeStyle = '#000000';
    ctx.lineWidth = 2;
    for (let i = 0; i < 3; i++) {
        ctx.beginPath();
        ctx.moveTo(200, 220 + i * 10);
        ctx.lineTo(150, 215 + i * 10);
        ctx.stroke();
        
        ctx.beginPath();
        ctx.moveTo(312, 220 + i * 10);
        ctx.lineTo(362, 215 + i * 10);
        ctx.stroke();
    }
    
    // –£–ª—ã–±–∫–∞
    ctx.beginPath();
    ctx.arc(256, 240, 30, 0.2, Math.PI - 0.2);
    ctx.stroke();
}

function drawGeneric(ctx, prompt) {
    // –û–±—â–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–ª—è –ª—é–±—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
    const colors = ['#FF6B6B', '#4ECDC4', '#FFD166', '#06D6A0', '#118AB2', '#9D4EDD'];
    const color = colors[prompt.length % colors.length];
    
    // –§–æ–Ω
    ctx.fillStyle = color;
    ctx.fillRect(0, 0, 512, 512);
    
    // –ì—Ä–∞–¥–∏–µ–Ω—Ç
    const gradient = ctx.createLinearGradient(0, 0, 512, 512);
    gradient.addColorStop(0, color);
    gradient.addColorStop(1, '#000000');
    
    ctx.fillStyle = gradient;
    ctx.fillRect(0, 0, 512, 512);
    
    // –¢–µ–∫—Å—Ç –ø—Ä–æ–º–ø—Ç–∞
    ctx.fillStyle = '#FFFFFF';
    ctx.font = 'bold 24px Arial, sans-serif';
    ctx.textAlign = 'center';
    ctx.textBaseline = 'middle';
    
    // –†–∞–∑–±–∏–≤–∞–µ–º –¥–ª–∏–Ω–Ω—ã–π –ø—Ä–æ–º–ø—Ç –Ω–∞ —Å—Ç—Ä–æ–∫–∏
    const words = prompt.split(' ');
    let lines = [];
    let currentLine = '';
    
    for (const word of words) {
        if (ctx.measureText(currentLine + ' ' + word).width < 450) {
            currentLine += (currentLine ? ' ' : '') + word;
        } else {
            lines.push(currentLine);
            currentLine = word;
        }
    }
    if (currentLine) lines.push(currentLine);
    
    // –†–∏—Å—É–µ–º —Å—Ç—Ä–æ–∫–∏
    const startY = 256 - (lines.length - 1) * 15;
    lines.forEach((line, index) => {
        ctx.fillText(line, 256, startY + index * 30);
    });
    
    // –î–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã
    ctx.strokeStyle = 'rgba(255, 255, 255, 0.3)';
    ctx.lineWidth = 3;
    
    ctx.beginPath();
    ctx.arc(256, 256, 150, 0, Math.PI * 2);
    ctx.stroke();
    
    ctx.beginPath();
    ctx.moveTo(100, 100);
    ctx.lineTo(412, 412);
    ctx.stroke();
    
    ctx.beginPath();
    ctx.moveTo(412, 100);
    ctx.lineTo(100, 412);
    ctx.stroke();
}

function drawLandscape(ctx) {
    // –ü—Ä–æ—Å—Ç–æ–π –ø–µ–π–∑–∞–∂
    ctx.fillStyle = '#87CEEB'; // –ù–µ–±–æ
    ctx.fillRect(0, 0, 512, 300);
    
    ctx.fillStyle = '#228B22'; // –¢—Ä–∞–≤–∞
    ctx.fillRect(0, 300, 512, 212);
    
    // –ì–æ—Ä—ã
    ctx.fillStyle = '#8B7355';
    ctx.beginPath();
    ctx.moveTo(0, 300);
    ctx.lineTo(150, 150);
    ctx.lineTo(300, 300);
    ctx.fill();
    
    ctx.beginPath();
    ctx.moveTo(200, 300);
    ctx.lineTo(350, 100);
    ctx.lineTo(500, 300);
    ctx.fill();
    
    // –°–æ–ª–Ω—Ü–µ
    ctx.fillStyle = '#FFD700';
    ctx.beginPath();
    ctx.arc(400, 80, 40, 0, Math.PI * 2);
    ctx.fill();
    
    // –û–±–ª–∞–∫–∞
    ctx.fillStyle = '#FFFFFF';
    ctx.beginPath();
    ctx.arc(100, 100, 25, 0, Math.PI * 2);
    ctx.arc(130, 90, 30, 0, Math.PI * 2);
    ctx.arc(160, 100, 25, 0, Math.PI * 2);
    ctx.fill();
}

function drawPortrait(ctx) {
    // –ü—Ä–æ—Å—Ç–æ–π –ø–æ—Ä—Ç—Ä–µ—Ç
    ctx.fillStyle = '#F5DEB3'; // –¶–≤–µ—Ç –∫–æ–∂–∏
    ctx.beginPath();
    ctx.arc(256, 200, 80, 0, Math.PI * 2); // –ì–æ–ª–æ–≤–∞
    ctx.fill();
    
    // –í–æ–ª–æ—Å—ã
    ctx.fillStyle = '#8B4513';
    ctx.beginPath();
    ctx.arc(256, 180, 90, Math.PI, Math.PI * 2);
    ctx.fill();
    
    // –ì–ª–∞–∑–∞
    ctx.fillStyle = '#FFFFFF';
    ctx.beginPath();
    ctx.arc(220, 190, 15, 0, Math.PI * 2);
    ctx.arc(292, 190, 15, 0, Math.PI * 2);
    ctx.fill();
    
    ctx.fillStyle = '#000000';
    ctx.beginPath();
    ctx.arc(220, 190, 7, 0, Math.PI * 2);
    ctx.arc(292, 190, 7, 0, Math.PI * 2);
    ctx.fill();
    
    // –ù–æ—Å
    ctx.beginPath();
    ctx.moveTo(256, 200);
    ctx.lineTo(246, 230);
    ctx.lineTo(256, 225);
    ctx.stroke();
    
    // –†–æ—Ç
    ctx.beginPath();
    ctx.arc(256, 250, 20, 0.2, Math.PI - 0.2);
    ctx.stroke();
}

// ========== –¢–ï–°–¢–û–í–ê–Ø –§–£–ù–ö–¶–ò–Ø ==========
async function testAllAPIs() {
    console.log("üß™ –¢–µ—Å—Ç–∏—Ä—É—é –≤—Å–µ API...");
    
    try {
        // –¢–µ—Å—Ç Hugging Face
        console.log("1. –¢–µ—Å—Ç–∏—Ä—É—é Hugging Face...");
        const hfTest = await fetch("https://api-inference.huggingface.co/models/stabilityai/stable-diffusion-xl-base-1.0", {
            method: "POST",
            headers: { 
                "Authorization": "Bearer ", // –ö–ª—é—á —É–¥–∞–ª–µ–Ω –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏,
                "Content-Type": "application/json"
            },
            body: JSON.stringify({ inputs: "test" }),
        });
        console.log("Hugging Face —Å—Ç–∞—Ç—É—Å:", hfTest.status);
        
        // –¢–µ—Å—Ç DeepAI
        console.log("2. –¢–µ—Å—Ç–∏—Ä—É—é DeepAI...");
        const deepTest = await fetch("https://api.deepai.org/api/text2img", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ text: "test" }),
        });
        console.log("DeepAI —Å—Ç–∞—Ç—É—Å:", deepTest.status);
        
        // –¢–µ—Å—Ç Pollinations
        console.log("3. –¢–µ—Å—Ç–∏—Ä—É—é Pollinations...");
        const img = new Image();
        const pollTest = new Promise((resolve) => {
            img.onload = () => resolve(true);
            img.onerror = () => resolve(false);
            img.src = "https://pollinations.ai/p/test?width=100&height=100";
        });
        console.log("Pollinations –¥–æ—Å—Ç—É–ø–µ–Ω:", await pollTest);
        
    } catch (error) {
        console.error("–û—à–∏–±–∫–∞ —Ç–µ—Å—Ç–∞:", error);
    }
}

// –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç –≤ –∫–æ–Ω—Å–æ–ª–∏: testAllAPIs()
        
        // –û—á–∏—Å—Ç–∫–∞ —á–∞—Ç–∞
        function clearChat() {
            const container = document.getElementById('chat-messages');
            container.innerHTML = `
                <div class="welcome-message">
                    <div class="message-bubble system">
                        <div class="message-header">
                            <span class="message-avatar">ü§ñ</span>
                            <span class="message-author">–ñ–∞–Ω AI</span>
                            <span class="message-time" id="current-time"></span>
                        </div>
                        <div class="message-content">
                            <h4>üëã –ß–ê–¢ –û–ß–ò–©–ï–ù</h4>
                            <p>–ù–∞—á–Ω–∏—Ç–µ –Ω–æ–≤—ã–π –¥–∏–∞–ª–æ–≥ –≤—ã–±—Ä–∞–≤ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç:</p>
                            <p>‚ñ∏ <strong>–ß–∞—Ç AI</strong> - –æ–±—â–∞–π—Ç–µ—Å—å —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Google Gemini AI<br>
                            ‚ñ∏ <strong>–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å</strong> - –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ —Å–∞–π—Ç—ã –Ω–∞ —É–≥—Ä–æ–∑—ã<br>
                            ‚ñ∏ <strong>–ì–µ–Ω–µ—Ä–∞—Ü–∏—è</strong> - —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ –æ–ø–∏—Å–∞–Ω–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π</p>
                            <div class="system-info">
                                <div class="info-item">–í–ï–†–°–ò–Ø: <span>2.0</span></div>
                                <div class="info-item">API: <span>Google Gemini AI</span></div>
                                <div class="info-item">–°–¢–ê–¢–£–°: <span class="status-online">–ì–û–¢–û–í</span></div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            messageCount = 0;
            document.getElementById('message-count').textContent = '0';
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –≤—Ä–µ–º—è –≤ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–º —Å–æ–æ–±—â–µ–Ω–∏–∏
            updateClock();
            
            // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å–µ—Å—Å–∏—é —á–∞—Ç–∞ Google AI
            if (chatSession) {
                // –ü–µ—Ä–µ–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º —á–∞—Ç
                initGoogleAI().then(() => {
                    showNotification("‚úÖ –ß–∞—Ç –æ—á–∏—â–µ–Ω. –ù–æ–≤–∞—è —Å–µ—Å—Å–∏—è Google AI —Å–æ–∑–¥–∞–Ω–∞.", "success");
                });
            }
        }
        
        // –°–∏–º—É–ª—è—Ü–∏—è —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –º–µ—Ç—Ä–∏–∫
        function startSystemMetrics() {
            setInterval(() => {
                // –û–±–Ω–æ–≤–ª—è–µ–º –∑–∞–≥—Ä—É–∑–∫—É CPU
                const cpu = getRandomInt(3, 35);
                document.getElementById('cpu-value').textContent = `${cpu}%`;
                document.getElementById('cpu-fill').style.width = `${cpu}%`;
                
                // –ú–∏–≥–∞–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
                const connDot = document.querySelector('.conn-dot');
                if (connDot && Math.random() > 0.8) {
                    connDot.classList.toggle('active');
                    setTimeout(() => connDot.classList.toggle('active'), 500);
                }
                
            }, 3000);
        }
        
        // –ü–æ–∫–∞–∑–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
        function showNotification(message, type = 'info') {
            // –°–æ–∑–¥–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: ${type === 'success' ? 'rgba(0, 255, 85, 0.9)' : type === 'warning' ? 'rgba(255, 204, 0, 0.9)' : type === 'error' ? 'rgba(255, 85, 85, 0.9)' : 'rgba(0, 170, 255, 0.9)'};
                color: white;
                padding: 15px 20px;
                border-radius: 8px;
                border: 1px solid rgba(255, 255, 255, 0.3);
                z-index: 10000;
                font-family: 'Rajdhani', sans-serif;
                font-weight: 600;
                max-width: 300px;
                box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
                animation: slideIn 0.3s ease-out;
            `;
            
            notification.textContent = message;
            document.body.appendChild(notification);
            
            // –£–¥–∞–ª—è–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã
            setTimeout(() => {
                notification.style.animation = 'slideOut 0.3s ease-out';
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.parentNode.removeChild(notification);
                    }
                }, 300);
            }, 3000);
            
            // –î–æ–±–∞–≤–ª—è–µ–º —Å—Ç–∏–ª–∏ –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–π
            if (!document.querySelector('#notification-styles')) {
                const style = document.createElement('style');
                style.id = 'notification-styles';
                style.textContent = `
                    @keyframes slideIn {
                        from { transform: translateX(100%); opacity: 0; }
                        to { transform: translateX(0); opacity: 1; }
                    }
                    @keyframes slideOut {
                        from { transform: translateX(0); opacity: 1; }
                        to { transform: translateX(100%); opacity: 0; }
                    }
                `;
                document.head.appendChild(style);
            }
        }
        
        // –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è
        function getRandomInt(min, max) {
            return Math.floor(Math.random() * (max - min + 1)) + min;
        }
        // ===== –§–£–ù–ö–¶–ò–ò –î–õ–Ø –ü–û–ò–°–ö–ê –ò–ù–§–û–†–ú–ê–¶–ò–ò =====

// ===== –§–£–ù–ö–¶–ò–ò –î–õ–Ø –ü–û–ò–°–ö–ê –ò–ù–§–û–†–ú–ê–¶–ò–ò =====

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π –ø–æ–∏—Å–∫–∞
function initSearchCategories() {
    const categoryButtons = document.querySelectorAll('.category-btn');
    
    categoryButtons.forEach(btn => {
        btn.addEventListener('click', () => {
            // –°–Ω–∏–º–∞–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å —Å–æ –≤—Å–µ—Ö –∫–Ω–æ–ø–æ–∫
            categoryButtons.forEach(b => b.classList.remove('active'));
            
            // –î–æ–±–∞–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å –≤—ã–±—Ä–∞–Ω–Ω–æ–π
            btn.classList.add('active');
            
            console.log(`–í—ã–±—Ä–∞–Ω–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏—è: ${btn.dataset.category}`);
        });
    });
    
    // –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º –ø–µ—Ä–≤—É—é –∫–∞—Ç–µ–≥–æ—Ä–∏—é –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
    if (categoryButtons.length > 0) {
        categoryButtons[0].classList.add('active');
    }
}

// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–¥—Å–∫–∞–∑–æ–∫ –ø–æ–∏—Å–∫–∞
function updateSearchSuggestions(categoryId) {
    const suggestions = document.getElementById('search-suggestions');
    if (!suggestions) return;
    
    const suggestionsMap = {
        'medicine': 'üíä –ü–æ–∏—Å–∫ –ø–æ –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–º —Å—Ç–∞—Ç—å—è–º, —Å–∏–º–ø—Ç–æ–º–∞–º, –ª–µ–∫–∞—Ä—Å—Ç–≤–∞–º',
        'movies': 'üé≠ –ü–æ–∏—Å–∫ —Ñ–∏–ª—å–º–æ–≤, –∞–∫—Ç–µ—Ä–æ–≤, —Ä–µ—Ü–µ–Ω–∑–∏–π, —Ä–µ–π—Ç–∏–Ω–≥–æ–≤',
        'gaming': 'üïπÔ∏è –ü–æ–∏—Å–∫ –∏–≥—Ä, –æ–±–∑–æ—Ä–æ–≤, —Å–∏—Å—Ç–µ–º–Ω—ã—Ö —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π, —Å—Ç—Ä–∏–º–æ–≤',
        'articles': 'üìë –ü–æ–∏—Å–∫ –Ω–æ–≤–æ—Å—Ç–µ–π, –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤, –±–ª–æ–≥–æ–≤',
        'science': 'üß™ –ü–æ–∏—Å–∫ –Ω–∞—É—á–Ω—ã—Ö —Å—Ç–∞—Ç–µ–π, –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–π, –æ—Ç–∫—Ä—ã—Ç–∏–π',
        'fantasy': 'üßô –ü–æ–∏—Å–∫ –ø–æ —Ñ—ç–Ω—Ç–µ–∑–∏-–º–∏—Ä–∞–º, –ø–µ—Ä—Å–æ–Ω–∞–∂–∞–º, –∞–≤—Ç–æ—Ä–∞–º',
        'tech': 'üíæ –ü–æ–∏—Å–∫ –ø–æ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è–º, –≥–∞–¥–∂–µ—Ç–∞–º, –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—é',
        'history': 'üèõÔ∏è –ü–æ–∏—Å–∫ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö —Å–æ–±—ã—Ç–∏–π, –ª–∏—á–Ω–æ—Å—Ç–µ–π, —ç–ø–æ—Ö'
    };
    
    suggestions.textContent = suggestionsMap[categoryId] || '–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é –¥–ª—è –ø–æ–∏—Å–∫–∞';
}

// –û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –ø–æ–∏—Å–∫–∞
async function performSearch() {
    console.log('performSearch –≤—ã–∑–≤–∞–Ω–∞');
    const queryInput = document.getElementById('search-query');
    if (!queryInput) {
        console.error('–ü–æ–ª–µ –ø–æ–∏—Å–∫–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ');
        showNotification('–û—à–∏–±–∫–∞: –ø–æ–ª–µ –ø–æ–∏—Å–∫–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ', 'error');
        return;
    }
    
    const query = queryInput.value.trim();
    if (!query) {
        showNotification('–í–≤–µ–¥–∏—Ç–µ –ø–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å', 'warning');
        return;
    }
    
    console.log('–í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–æ–∏—Å–∫:', query);
    
    const activeCategory = document.querySelector('.category-btn.active');
    // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –∫–∞—Ç–µ–≥–æ—Ä–∏—é –∏ –Ω–∞–∑–≤–∞–Ω–∏–µ
    let category = 'general';
    let categoryName = '–û–±—â–∏–π –ø–æ–∏—Å–∫';
    
    if (activeCategory) {
        category = activeCategory.dataset.category;
        const categorySpan = activeCategory.querySelector('span:not(.category-icon)');
        if (categorySpan) {
            categoryName = categorySpan.textContent;
        }
    }
    
    addMessage({
        type: 'user',
        content: `üîç –ü–æ–∏—Å–∫: "${query}"<br><small>–ö–∞—Ç–µ–≥–æ—Ä–∏—è: ${categoryName}</small>`,
        timestamp: new Date()
    });
    
    showTypingIndicator();
    
    try {
        let searchPrompt = `–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏—â–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ "${categoryName}": "${query}"\n\n`;
        
        const contextMap = {
            'medicine': '–≠—Ç–æ –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–π –∑–∞–ø—Ä–æ—Å. –î–∞–π—Ç–µ —Ç–æ—á–Ω—É—é, –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—É—é –º–µ–¥–∏—Ü–∏–Ω—Å–∫—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é. –ï—Å–ª–∏ —ç—Ç–æ —Å–∏–º–ø—Ç–æ–º—ã - —É–∫–∞–∂–∏—Ç–µ –≤–æ–∑–º–æ–∂–Ω—ã–µ –∑–∞–±–æ–ª–µ–≤–∞–Ω–∏—è –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ –≤—Ä–∞—á—É.',
            'movies': '–≠—Ç–æ –∑–∞–ø—Ä–æ—Å –æ —Ñ–∏–ª—å–º–∞—Ö –∏–ª–∏ –º—É–ª—å—Ç—Ñ–∏–ª—å–º–∞—Ö. –ü—Ä–µ–¥–æ—Å—Ç–∞–≤—å—Ç–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ñ–∏–ª—å–º–∞—Ö, –∞–∫—Ç–µ—Ä–∞—Ö, —Ä–µ–∂–∏—Å—Å–µ—Ä–∞—Ö, —Ä–µ–π—Ç–∏–Ω–≥–∞—Ö, –≥–¥–µ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å.',
            'gaming': '–≠—Ç–æ –∏–≥—Ä–æ–≤–æ–π –∑–∞–ø—Ä–æ—Å. –†–∞—Å—Å–∫–∞–∂–∏—Ç–µ –æ–± –∏–≥—Ä–∞—Ö, –∏–≥—Ä–æ–≤—ã—Ö –º–µ—Ö–∞–Ω–∏–∫–∞—Ö, –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞—Ö, —Å–∏—Å—Ç–µ–º–Ω—ã—Ö —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è—Ö, –≥–¥–µ –∫—É–ø–∏—Ç—å.',
            'articles': '–≠—Ç–æ –∑–∞–ø—Ä–æ—Å –Ω–æ–≤–æ—Å—Ç–µ–π –∏–ª–∏ —Å—Ç–∞—Ç–µ–π. –ü—Ä–µ–¥–æ—Å—Ç–∞–≤—å—Ç–µ –∞–∫—Ç—É–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –∏–∑ –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤.',
            'science': '–≠—Ç–æ –Ω–∞—É—á–Ω—ã–π –∑–∞–ø—Ä–æ—Å. –î–∞–π—Ç–µ —Ç–æ—á–Ω—É—é –Ω–∞—É—á–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é —Å –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ–º —Ç–µ—Ä–º–∏–Ω–æ–≤.',
            'fantasy': '–≠—Ç–æ –∑–∞–ø—Ä–æ—Å –æ —Ñ–∞–Ω—Ç–∞—Å—Ç–∏–∫–µ –∏–ª–∏ —Ñ—ç–Ω—Ç–µ–∑–∏. –†–∞—Å—Å–∫–∞–∂–∏—Ç–µ –æ –≤—Å–µ–ª–µ–Ω–Ω—ã—Ö, –ø–µ—Ä—Å–æ–Ω–∞–∂–∞—Ö, –∞–≤—Ç–æ—Ä–∞—Ö.',
            'tech': '–≠—Ç–æ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π –∑–∞–ø—Ä–æ—Å. –û–±—ä—è—Å–Ω–∏—Ç–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∞—Å–ø–µ–∫—Ç—ã –ø—Ä–æ—Å—Ç—ã–º —è–∑—ã–∫–æ–º.',
            'history': '–≠—Ç–æ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–π –∑–∞–ø—Ä–æ—Å. –ü—Ä–µ–¥–æ—Å—Ç–∞–≤—å—Ç–µ –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ —Ñ–∞–∫—Ç—ã —Å –¥–∞—Ç–∞–º–∏.',
            'general': '–î–∞–π—Ç–µ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—ã–π –æ—Ç–≤–µ—Ç –Ω–∞ –∑–∞–ø—Ä–æ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –∏—Å–ø–æ–ª—å–∑—É—è —Ä–∞–∑–ª–∏—á–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏.'
        };
        
        searchPrompt += contextMap[category] || contextMap.general;
        searchPrompt += '\n\n–ü—Ä–µ–¥–æ—Å—Ç–∞–≤—å—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç —Å –ø–æ–ª–µ–∑–Ω—ã–º–∏ —Å—Å—ã–ª–∫–∞–º–∏.';
        
        if (chatSession) {
            const result = await chatSession.sendMessage(searchPrompt);
            const response = result.response.text();
            hideTypingIndicator();
            
            const formattedResponse = formatSearchResponse(response, categoryName);
            
            addMessage({
                type: 'assistant',
                content: formattedResponse,
                timestamp: new Date()
            });
        } else {
            hideTypingIndicator();
            
            const demoResponses = {
                'medicine': `üîç <strong>–ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:</strong> "${query}"<br><br>
                <strong>–û—Å–Ω–æ–≤–Ω—ã–µ —Å–≤–µ–¥–µ–Ω–∏—è:</strong><br>
                ‚Ä¢ –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ –≤—Ä–∞—á—É<br>
                ‚Ä¢ –û–±—â–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏<br>
                ‚Ä¢ –í–∞–∂–Ω—ã–µ —Å–∏–º–ø—Ç–æ–º—ã<br><br>
                <em>‚ö†Ô∏è –ù–µ –∑–∞–º–µ–Ω—è–µ—Ç –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—é –≤—Ä–∞—á–∞</em>`,
                
                'movies': `üé¨ <strong>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ñ–∏–ª—å–º–∞—Ö:</strong> "${query}"<br><br>
                <strong>–ß—Ç–æ –Ω–∞–π–¥–µ–Ω–æ:</strong><br>
                ‚Ä¢ –ü–æ—Ö–æ–∂–∏–µ —Ñ–∏–ª—å–º—ã –∏ –º—É–ª—å—Ç—Ñ–∏–ª—å–º—ã<br>
                ‚Ä¢ –ê–∫—Ç—É–∞–ª—å–Ω—ã–µ —Ä–µ–π—Ç–∏–Ω–≥–∏<br>
                ‚Ä¢ –ì–¥–µ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –æ–Ω–ª–∞–π–Ω`,
                
                'gaming': `üéÆ <strong>–ò–≥—Ä–æ–≤–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:</strong> "${query}"<br><br>
                <strong>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞:</strong><br>
                ‚Ä¢ –û–±–∑–æ—Ä—ã –∏ —Ä–µ–π—Ç–∏–Ω–≥–∏<br>
                ‚Ä¢ –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è<br>
                ‚Ä¢ –°–æ–≤–µ—Ç—ã –ø–æ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—é`
            };
            
            const response = demoResponses[category] || 
                `üîç <strong>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞:</strong> "${query}"<br><br>
                –ü–æ –≤–∞—à–µ–º—É –∑–∞–ø—Ä–æ—Å—É –Ω–∞–π–¥–µ–Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ <strong>${categoryName}</strong>.<br><br>
                <strong>–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏:</strong><br>
                ‚Ä¢ Wikipedia - —ç–Ω—Ü–∏–∫–ª–æ–ø–µ–¥–∏—á–µ—Å–∫–∏–µ —Å–≤–µ–¥–µ–Ω–∏—è<br>
                ‚Ä¢ Google Scholar - –Ω–∞—É—á–Ω—ã–µ —Å—Ç–∞—Ç—å–∏<br>
                ‚Ä¢ –Ø–Ω–¥–µ–∫—Å.–ù–æ–≤–æ—Å—Ç–∏ - –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –Ω–æ–≤–æ—Å—Ç–∏`;
            
            addMessage({
                type: 'assistant',
                content: response,
                timestamp: new Date()
            });
        }
        
        queryInput.value = '';
        
    } catch (error) {
        hideTypingIndicator();
        console.error("–û—à–∏–±–∫–∞ –ø–æ–∏—Å–∫–∞:", error);
        
        addMessage({
            type: 'assistant',
            content: `‚ùå <strong>–û—à–∏–±–∫–∞ –ø–æ–∏—Å–∫–∞</strong><br><br>
            –ù–µ —É–¥–∞–ª–æ—Å—å –≤—ã–ø–æ–ª–Ω–∏—Ç—å –ø–æ–∏—Å–∫: ${error.message}<br><br>
            <strong>–ß—Ç–æ –¥–µ–ª–∞—Ç—å:</strong><br>
            1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É<br>
            2. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –¥—Ä—É–≥–æ–π –∑–∞–ø—Ä–æ—Å<br>
            3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Google AI –¥–æ—Å—Ç—É–ø–µ–Ω`,
            timestamp: new Date()
        });
    }
}

// –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞ –ø–æ–∏—Å–∫–∞
function formatSearchResponse(response, categoryName) {
    let html = `üîç <strong>–†–ï–ó–£–õ–¨–¢–ê–¢–´ –ü–û–ò–°–ö–ê</strong><br><br>`;
    html += `<small style="color: #00aaff;">üìÇ –ö–∞—Ç–µ–≥–æ—Ä–∏—è: ${categoryName}</small><br><br>`;
    
    const lines = response.split('\n');
    let inList = false;
    
    lines.forEach(line => {
        const trimmed = line.trim();
        
        if (trimmed.startsWith('- ') || trimmed.startsWith('‚Ä¢ ') || trimmed.match(/^\d+\./)) {
            if (!inList) {
                html += '<ul style="margin: 10px 0; padding-left: 20px;">';
                inList = true;
            }
            html += `<li>${trimmed.replace(/^[-‚Ä¢\d\.\s]+/, '')}</li>`;
        } else {
            if (inList) {
                html += '</ul>';
                inList = false;
            }
            
            if (trimmed.startsWith('## ') || trimmed.startsWith('**')) {
                html += `<h4 style="color: #00ffea; margin: 15px 0 5px 0;">${trimmed.replace(/^[#\*\s]+/, '')}</h4>`;
            } else if (trimmed) {
                html += `<p style="margin: 8px 0;">${trimmed}</p>`;
            }
        }
    });
    
    if (inList) html += '</ul>';
    
    html += `<br><div style="background: rgba(0,50,100,0.2); padding: 15px; border-radius: 8px; margin-top: 15px;">
                <strong>üîó –ü–æ–ª–µ–∑–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã:</strong><br>
                <div style="display: flex; flex-wrap: wrap; gap: 10px; margin-top: 10px;">
                    <a href="https://wikipedia.org" target="_blank" style="background: rgba(0,100,200,0.3); padding: 8px 15px; border-radius: 5px; color: #a0c0ff; text-decoration: none;">
                        Wikipedia
                    </a>
                    <a href="https://scholar.google.com" target="_blank" style="background: rgba(0,100,200,0.3); padding: 8px 15px; border-radius: 5px; color: #a0c0ff; text-decoration: none;">
                        Google Scholar
                    </a>
                    <a href="https://arxiv.org" target="_blank" style="background: rgba(0,100,200,0.3); padding: 8px 15px; border-radius: 5px; color: #a0c0ff; text-decoration: none;">
                        arXiv
                    </a>
                </div>
            </div>`;
    
    return html;
}
    </script>
</body>
</html>